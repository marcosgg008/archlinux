"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bmSetContextMenus(){var t,c,e="undefined"!=typeof globalThis&&globalThis||window,n="object"===("undefined"==typeof chrome?"undefined":_typeof(chrome))&&chrome&&chrome.runtime&&chrome||"object"===("undefined"==typeof browser?"undefined":_typeof(browser))&&browser||{},i=n.contextMenus||n.menus;function o(t){e.open(t,"_blank","noopener")}function a(t,e){n.windows.create({url:cjBasics.urlParams.attach("https://www.google.com/bookmarks/mark",{op:"edit",output:"popup",title:e,bkmk:t}),width:600,height:500,type:"panel"})}function s(t){t=t||{};t.view="cm",t.tf="0",n.windows.create({url:cjBasics.urlParams.attach("https://mail.google.com/mail",t),width:500,height:516,type:"panel"})}function l(t,e){i.create({contexts:e.contexts||[e.context||"page"],id:t,title:e.title})}function r(t,e){c[t.menuItemId].onClick(t,e),u()}function u(){i.onClicked.hasListener(r)||i.onClicked.hasListeners&&i.onClicked.hasListeners()||i.onClicked.addListener(r)}i&&(t=cjBasics.ajax("/pages.json",{fetchAs:"json"}).then(function(t){return Object.keys(t)}),c={openInTab:{limitToPages:["extensionsettings"],context:"browser_action",title:cjBasics.lang.i18n("cj_i18n_01545","Open in a new tab"),onClick:function(){!function(t){if(t){if("object"===_typeof(n.tabs))try{return n.tabs.create({url:t},function(){n.runtime.lastError&&o(t)})}catch(t){}o(t)}}("/views/app.html")}},openInPanel:{limitToPages:["extensionsettings"],context:"browser_action",title:cjBasics.lang.i18n("cj_i18n_01546","Open in a panel"),onClick:function(){setTimeout(function(){n.windows.create({url:"/views/app.html",width:600,height:596,type:"panel",focused:!0})})}},translateSelection:{limitToPages:["translate"],context:"selection",title:cjBasics.lang.i18n("cj_i18n_01547","Translate text"),onClick:function(t){n.windows.create({url:"https://translate.google.com/#"+cjBasics.urlParams.create({view:"home",op:"translate",sl:"auto",tl:navigator.language.split("-")[0].split("_")[0],text:t.selectionText}),width:500,height:516,type:"panel"})}},emailSelection:{limitToPages:["gmail","inbox"],context:"selection",title:cjBasics.lang.i18n("cj_i18n_01548","Mail this text"),onClick:function(t){s({body:t.selectionText+"\n\nSource: "+t.pageUrl})}},emailToSelection:{limitToPages:["gmail","inbox"],context:"selection",title:cjBasics.lang.i18n("cj_i18n_01549","Write mail to address"),onClick:function(t){s({to:t.selectionText})}},bookmarkThisPage:{limitToPages:["bookmarks"],context:"page",title:cjBasics.lang.i18n("cj_i18n_01550","Bookmark this page"),onClick:function(t,e){a(t.pageUrl,e.title)}},bookmarkThisLink:{limitToPages:["bookmarks"],context:"link",title:cjBasics.lang.i18n("cj_i18n_01551","Bookmark this link"),onClick:function(t){a(t.linkUrl)}},gmailThisPage:{limitToPages:["gmail","inbox"],context:"page",title:cjBasics.lang.i18n("cj_i18n_01552","Mail this page"),onClick:function(t,e){s({su:e.title,body:t.pageUrl})}}},i.removeAll(function(){t.then(function(o){Object.keys(c).forEach(function(t){var e=c[t],n=e.limitToPages;if(Array.isArray(n)){for(var i=0;i<n.length;i++)if(-1!==o.indexOf(n[i]))return void l(t,e)}else l(t,e)}),u()})}))}