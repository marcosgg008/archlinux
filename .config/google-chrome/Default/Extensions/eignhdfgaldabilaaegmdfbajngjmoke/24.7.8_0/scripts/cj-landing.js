"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cjLanding(o){var i,n="undefined"!=typeof globalThis&&globalThis||window,a="object"===("undefined"==typeof chrome?"undefined":_typeof(chrome))&&chrome&&chrome.runtime&&chrome||"object"===("undefined"==typeof browser?"undefined":_typeof(browser))&&browser||{},t=a.action||a.browserAction||a.pageAction,r=a.notifications,c=a.runtime.getManifest(),s=c.version,e=c.browser_action||c.action,d=e&&e.default_popup,e=(o.origin||"https://apps.jeurissen.co")+"/"+(o.websitePath||"")+"/",u=e+"installed",l=e+"whatsnew?installed=1",f=o.updateBadge,p=864e5*(o.passiveActionButton?1.5:4.5);function _(){i&&(i=null,y(l),a.storage.local.remove("cj_landing_lastupdated"),o.onExecute&&o.onExecute(),f&&(t.onClicked.removeListener(_),d&&g(d),!0===f&&t.setBadgeText({text:""})))}function g(e){t.setPopup({popup:e||""})}function b(e){e=e.split(".");return e[0]+"."+e[1]}function m(e){n.open(e,"_blank","noopener")}function y(e){if(e){if("object"===_typeof(a.tabs))try{return void a.tabs.create({url:e},function(){a.runtime.lastError&&m(e)})}catch(e){}m(e)}}function j(e,n){return e&&"object"===_typeof(a.i18n)&&"function"==typeof a.i18n.getMessage&&a.i18n.getMessage(e)||n||""}function v(){r.create("cj_landing_update_notification",{type:"basic",requireInteraction:!0,title:j("cj_i18n_06288","__app_name__ has been updated").replace("__app_name__",c.name),message:j("cj_i18n_06287","Click to view changelog"),iconUrl:function(){var e=c.icons;if(e)return e[160]||e[80]||e[128]||e[48]||e[Object.keys(e)[0]]}()}),r.onClicked.addListener(function(e){"cj_landing_update_notification"===e&&(_(),r.clear("cj_landing_update_notification"))})}function h(e){f&&(t.onClicked.addListener(_),d&&g(),!0===f&&(t.setBadgeBackgroundColor({color:"#EA4335"}),t.setBadgeText({text:"âœµ"}))),o.onUpdateAvailable&&o.onUpdateAvailable(),p<e-i&&w()}function w(){function e(){_(),a.windows.onFocusChanged.removeListener(e),a.tabs.onCreated.removeListener(e)}a.windows.onFocusChanged.addListener(e),a.tabs.onCreated.addListener(e)}a.runtime.setUninstallURL(e+"uninstalled"),a.storage.local.get(["cj_landing_lastupdated","cj_landing_versionnumber"],function(e){var n=Date.now();i=e.cj_landing_lastupdated;var t=e.cj_landing_versionnumber;"string"!=typeof t?y(u):i||(e=b(t),b(s)!==e&&(i=n,a.storage.local.set({cj_landing_lastupdated:n}))),i&&!o.noUpdateNotice&&(o.useNotification&&r?v():f?h(n):w(),o.handleTrigger&&a.runtime.onMessage.addListener(function e(n){n&&"object"===_typeof(n)&&n.cjLandingOpen&&(_(),a.runtime.onMessage.removeListener(e))})),t!==s&&a.storage.local.set({cj_landing_versionnumber:s})})}