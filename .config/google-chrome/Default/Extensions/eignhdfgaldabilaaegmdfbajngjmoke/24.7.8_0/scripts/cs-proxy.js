"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var e,s,t,r,o,i,u;window.top===window||"https://www.google.com"===(e=window.location).origin&&(o="object"===("undefined"==typeof chrome?"undefined":_typeof(chrome))&&chrome&&chrome.runtime&&chrome||"object"===("undefined"==typeof browser?"undefined":_typeof(browser))&&browser||{},s=o.runtime.getURL("PATH/").replace("/PATH/",""),("object"!==_typeof(t=window.location.ancestorOrigins)||1===t.length&&t[0]===s)&&(r=s.startsWith("moz-extension://"),o="object"===_typeof(o.i18n)&&"function"==typeof o.i18n.getMessage&&o.i18n.getMessage("@@extension_id")||s.split("://")[1]||"",e.pathname.startsWith("/cjg-proxy/"+o)&&(u=null,i=function(r,e){var i=e||{},a=i.fetchAs||"text";return new Promise(function(t,o){var n=new window.XMLHttpRequest,e=i.method||"GET",s="GET"===e;return n.open(e=s?"POST":e,r),s&&n.setRequestHeader("X-HTTP-Method-Override","GET"),n.addEventListener("load",function(){if(200<=n.status&&n.status<300)if("json"===a)try{t(JSON.parse(n.responseText))}catch(e){o(e)}else"xml"===a||"html"===a?(u=u||new window.DOMParser,t(u.parseFromString(n.responseText,"xml"===a?"text/xml":"text/html"))):t(n.responseText);else{var e={status:n.status,body:n.responseText};o(e)}}),n.addEventListener("error",function(){var e={status:n.status,body:n.responseText};o(e)}),i.credentials&&"include"===i.credentials&&(n.withCredentials=!0),i.headers&&Object.keys(i.headers).forEach(function(e){var t=i.headers[e];null!=t&&n.setRequestHeader(e,t)}),"json"===a&&n.overrideMimeType("application/json"),n.send(i.body),n})},window.addEventListener("message",function(e){var t,o,n;e.origin===s&&(e.isTrusted||r)&&(o=(t=e.data||{}).bm_method,e=JSON.parse(window.atob(t.bm_value)),n=t.bm_request,"cjgOriginRequest"===o&&i(e.url,e.parameters).then(function(e){window.parent.postMessage({bm_method:"cjgOriginRequest",bm_value:{success:!0,response:e},bm_request:n},s)},function(e){window.parent.postMessage({bm_method:"cjgOriginRequest",bm_value:{success:!1,response:e},bm_request:n},s)}))}),window.parent.postMessage({bm_method:"cjgProxyReady"},s))))}();