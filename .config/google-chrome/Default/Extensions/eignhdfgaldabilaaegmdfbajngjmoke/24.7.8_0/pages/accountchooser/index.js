"use strict";cjce.registerTemplate("bm-p-accountchooser",function(a,s){var t,d=!s.standaloneService||s.servicesDatabase[s.standaloneService].brandAccount;function l(e,c){var a=cjce.createElement("cjmd-item");c||a.classList.add("bm-p-accountchooser-item--large"),a.addEventListener("click",function(){e.validSession?cjgApis.session.changeAccount(e):cjgApis.account.signin(e)});var t=c?32:40,n=Math.ceil(t*window.devicePixelRatio),t=cjce.createElement("cjmd-icon",{circle:!0,size:t,url:e.photoUrl+"?sz="+n,backupUrl:"/images/avatar.svg"});c&&t.classList.add("bm-p-accountchooser-item__compacticon"),a.appendChild(t);n=document.createElement("div");n.className="cjmd-item__body";var o,t=document.createElement("div");return t.className="cjmd-item__header",t.textContent=e.displayName,n.appendChild(t),c||((o=document.createElement("div")).className="cjmd-secondarytext",o.textContent=e.displayEmail,n.appendChild(o)),e.validSession||((o=document.createElement("div")).className="cjmd-secondarytext bm-p-accountchooser-item__signedout",o.textContent=cjBasics.lang.i18n("cj_i18n_01508","Signed out"),n.appendChild(o)),a.appendChild(n),a}!function(){t=function(){var e=document.createElement("div");e.className="bm-p-accountchooser-header",cjce.applyTemplate(e,"bm-loadingbar");var c=Math.ceil(72*window.devicePixelRatio),a=cjce.createElement("cjmd-icon",{circle:!0,size:72,url:s.account.photoUrl+"?sz="+c,backupUrl:"/images/avatar.svg"});return a.classList.add("bm-p-accountchooser-header__avatar"),e.appendChild(a),(c=document.createElement("div")).className="bm-p-accountchooser-header__details",(a=document.createElement("div")).className="bm-p-accountchooser-header__name",a.textContent=s.account.displayName,c.appendChild(a),(a=document.createElement("div")).className="cjmd-secondarytext bm-p-accountchooser-header__email",a.textContent=s.account.pageId?cjBasics.lang.i18n("cj_i18n_00363","Brand account"):s.account.displayEmail,c.appendChild(a),(a=cjce.createElement("cjmd-button",{color:!0,label:cjBasics.lang.i18n("cj_i18n_01506","Account"),onClick:function(){s.servicesDatabase.myaccount&&!s.missingGooglePermission?s.pageManager.navigate("myaccount"):s.openTab("https://myaccount.google.com/"+s.wizPath)}})).classList.add("bm-p-accountchooser-header__button"),c.appendChild(a),(a=cjce.createElement("cjmd-button",{color:!0,label:cjBasics.lang.i18n("cj_i18n_00161","About me"),onClick:function(){s.servicesDatabase.aboutme&&!s.missingGooglePermission?s.pageManager.navigate("aboutme"):s.openTab("https://myaccount.google.com/"+s.wizPath+"profile")}})).classList.add("bm-p-accountchooser-header__button"),c.appendChild(a),e.appendChild(c),(a=cjce.createElement("cjmd-button",{color:!0,label:cjBasics.lang.i18n("cj_i18n_01507","Sign out"),onClick:function(){browserStorage.local.get().then(function(e){return Object.keys(e).filter(function(e){return e.startsWith("bm_cache_")})}).then(browserStorage.local.remove),cjgApis.account.signout()}})).classList.add("bm-p-accountchooser-header__button"),c.appendChild(a),e.appendChild(c),e}(),a.appendChild(t);var c=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"});a.appendChild(c);var i=cjce.createElement("cjmd-list"),e=cjce.createElement("cjmd-item",{icon:{size:24,color:!0,withShell:!0,name:"__mdi:add"},label:cjBasics.lang.i18n("cj_i18n_00361","Add account"),onClick:function(){cjgApis.account.signin()}});i.appendChild(e),cjgApis.session.accountsList.then(function(e){var t={},a=s.account.authuser,n="0"!==a,o={};e.forEach(function(e){var c;e.pageId?t[e.pageId]=e:(e.obfuscatedId!==s.account.obfuscatedId&&(c=l(e),i.appendChild(c)),(e=e.authuser)!==a&&(o[e]=!0,n||"1"!==e||(n=!0)))}),c.appendChild(i),d&&(!n&&0===Object.keys(t).length||(e=Object.keys(o).map(function(e){return cjgApis.account.list({authuser:e}).then(function(e){e.forEach(function(e){var c,a=e.pageId;a&&((c=t[a])&&(!e.ownedBySelectedAccount||c.ownedBySelectedAccount)||(t[a]=e))})})}),Promise.all(e).then(function(){var e,c=Object.keys(t);0!==c.length&&(e=cjce.createElement("cjmd-subheader",{label:cjBasics.lang.i18n("cj_i18n_00744","Brand accounts")}),i.appendChild(e),c.map(function(e){return t[e]}).sort(function(e,c){return e.displayName<c.displayName?-1:1}).forEach(function(e){e.obfuscatedId!==s.account.obfuscatedId&&(e=l(e,!0),i.appendChild(e))}))})))}).then(function(){t.cjceSetLoading(!1)})}()});