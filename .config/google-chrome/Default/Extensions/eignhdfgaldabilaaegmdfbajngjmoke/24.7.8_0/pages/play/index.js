"use strict";cjce.registerTemplate("bm-p-play",function(a,t){var s,i,o,l,r,n,m="https://play.google.com",e=!cjBasics.wrif.supported,c=cjBasics.uniqueId.generate(),p="string"==typeof cjBasics.lang.current&&"en"===cjBasics.lang.current.split("-")[0].split("_")[0],d=p?"all":"apps",h="home",u="",b="Loading...",_=cjBasics.lang.i18n("cj_i18n_00107","All"),j=cjBasics.lang.i18n("cj_i18n_01697","Entertainment"),g=t.darkMode?"#fff":"#212121",f=g,v="";"0"!==t.account.authuser&&(v+="?authuser="+t.account.authuser);var y,B,w={bm_cid:"play",bm_cst:"2",bm_wiz:"1",bm_iid:c,hl:cjBasics.lang.current},T={home:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_00291","Home"),pathname:"/store",newTabUrl:!0},account:{iconName:"__mdi:account_circle",label:cjBasics.lang.i18n("cj_i18n_00481","Account"),pathname:"/store/account",newTabUrl:!0},paymentmethods:{iconName:"__mdi:payment",label:cjBasics.lang.i18n("cj_i18n_01517","Payment methods"),pathname:"/store/paymentmethods",newTabUrl:!0},subscriptions:{iconName:"__mdi:autorenew",label:cjBasics.lang.i18n("cj_i18n_01089","Subscriptions"),pathname:"/store/account/subscriptions",newTabUrl:!0},wishlist:{iconName:"__mdi:cjg_wishlist",label:cjBasics.lang.i18n("cj_i18n_00550","Wishlist"),pathname:"/wishlist",newTabUrl:!0},playActivity:{iconName:"__mdi:rate_review",label:cjBasics.lang.i18n("cj_i18n_01696","My Play activity"),pathname:"/store/myplayactivity",newTabUrl:!0},settings:{iconName:"__mdi:settings",label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),pathname:"/settings",newTabUrl:!0},appsHeader:{header:!0,label:cjBasics.lang.i18n("cj_i18n_00216","Apps")},movies:{label:cjBasics.lang.i18n("cj_i18n_01725","Play Movies & TV"),iconName:"__mdi:play_movies",color:"#ea4335",pathname:"/movies",newTabUrl:!0,colorIcon:!0},books:{label:cjBasics.lang.i18n("cj_i18n_00285","Play Books"),iconName:"__mdi:play_books",color:"#03a9f4",pathname:"/books",newTabUrl:!0,colorIcon:!0},linksHeader:{header:!0,label:cjBasics.lang.i18n("cj_i18n_00047","More")},redeem:{iconName:"__mdi:redeem",label:cjBasics.lang.i18n("cj_i18n_01677","Redeem code"),pathname:"/store",urlParams:{code:""},newTabUrl:!0,external:!e},giftcard:{iconName:"__mdi:card_giftcard",label:cjBasics.lang.i18n("cj_i18n_01694","Buy gift card"),pathname:"/about/giftcards/",newTabUrl:!0,external:!e},help:{iconName:"__mdi:help_outline",label:cjBasics.lang.i18n("cj_i18n_00438","Help"),newTabUrl:"https://support.google.com/googleplay"+v,external:!e},parentGuide:{iconName:"__mdi:supervisor_account",label:cjBasics.lang.i18n("cj_i18n_01695","Parent guide"),newTabUrl:"https://support.google.com/googleplay/answer/6209547"+v,external:!e}},S={all:{searchType:"all",label:j,pathname:"/store",iconName:"__mdi:cj_play_entertainment",newTabUrl:!0,color:g},apps:{searchType:"apps",label:cjBasics.lang.i18n("cj_i18n_00216","Apps"),pathname:"/store/apps",iconName:"__mdi:cj_play_android",newTabUrl:!0,color:"#34a853"},movies:{searchType:"movies",label:cjBasics.lang.i18n("cj_i18n_00480","Movies"),pathname:"/store/movies",iconName:"__mdi:play_movies",newTabUrl:!0,color:"#ea4335"},books:{searchType:"books",label:cjBasics.lang.i18n("cj_i18n_00218","Books"),pathname:"/store/books",iconName:"__mdi:play_books",newTabUrl:!0,color:"#03a9f4"}};function k(e,a){h="home",H(C(d=e),null,a)}function N(e,a){a=cjBasics.urlParams.attach(m+"/store/search",{q:e,c:U(a),authuser:t.account.authuser});t.openTab(a)}function U(e){return e&&"all"!==e&&"entertainment"!==e?e:null}function C(e){e=U(e);return e?"/store/"+e:"/store"}function P(e){H("/store/search",{q:u=e,c:U(d)})}function I(){n.cjceGetCleanUrl(m).then(function(e){t.openTab(e||m+"/store")})}function x(e){var a=T[e]||S[e],c=a.newTabUrl;!0===a.newTabUrl&&((e=a.urlParams||{}).authuser=t.account.authuser,c=cjBasics.urlParams.attach(m+a.pathname,e)),t.openTab(c)}function E(e,a){var c,n=a.searchType&&i.value;n?N(n,a.searchType):(c=a.newTabUrl,!0===a.newTabUrl&&((n=a.urlParams||{}).authuser=t.account.authuser,c=cjBasics.urlParams.attach(m+a.pathname,n)),t.openTab(c))}function M(){n.cjceSendFrameCommand({method:"bmCstNavigateBack"},m)}function A(e,a){var c="";return e&&(c+=e),c=cjBasics.urlParams.attach(c,w),c=a?cjBasics.urlParams.attach(c,a):c}function H(e,a,c){a=A(e,a);c?n.src=m+a:n.cjceSendFrameCommand({method:"bmCstUpdateState",value:a},m)}p||delete S.all,e?(s=cjce.createElement("bm-ogb",{serviceIcon:"play",serviceLabel:cjBasics.lang.i18n("cj_i18n_00430","Play Store"),pageLabel:cjBasics.lang.i18n("cj_i18n_01167","Links"),searchbox:{onSubmit:N,submitInNewTab:!0},bmApis:t,onNewTab:function(){x("home")}}),a.appendChild(s),i=s.cjceSearchboxEl,t.setOnPageDisplayHandler(function(e){i.select()}),y=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),a.appendChild(y),v=Object.keys(S).map(function(e){return S[e]}),e=["appsHeader","movies","books","linksHeader","account","subscriptions","wishlist","playActivity","redeem","giftcard","parentGuide","settings","help"].map(function(e){var a=T[e];return a.id=e,a}),v=v.concat(e),B=cjce.createElement("bm-navlist",{items:v,onClick:function(e,a){"movies"===e||"books"===e?t.pageManager.navigate(e):E(0,a)},onNewTab:E}),y.appendChild(B)):function(){s=cjce.createElement("bm-ogb",{loading:g,drawer:{color:g},searchbox:{color:g,onClear:function(){s.cjceSetNavigatorCollapseState("search"===h),setTimeout(function(){s.cjceSetNavigatorCollapseState("search"===h)})},onSubmit:P,onMetaSubmit:function(e){N(e,d)}},serviceIcon:"play",serviceLabel:cjBasics.lang.i18n("cj_i18n_00430","Play Store"),pageLabel:cjBasics.lang.i18n("cj_i18n_00291","Home"),bmApis:t,onNewTab:I,onBack:function(){"search"===h?(u="",i.value="",d="movies"===d||"books"===d||"apps"===d?d:p?"all":"apps",H(C(l.cjceSelectedId=d))):M()}}),a.appendChild(s);var e=s.cjceDrawerEl;i=s.cjceSearchboxEl,t.setOnPageDisplayHandler(function(e){e.typeId&&setTimeout(function(){k(e.typeId,!0)}),i.select()}),B=cjce.createElement("bm-navlist",{isSelector:!0,items:T,selectedId:h,onChange:function(e){"movies"===e||"books"===e?(t.pageManager.navigate(e),B.cjceSelectedId=h):H((T[e]||{}).pathname)},onNewTab:x}),e.appendChild(B),(o=cjce.createElement("cjmd-iconbutton",{iconName:"__mdi:search",onClick:function(){H("/store/search",{q:u,c:U(d)}),s.cjceSetBackState(!0),s.cjceSetNavigatorCollapseState(!0),i.hidden=!1,o.hidden=!0,i.select()}})).hidden=!0,s.cjceAppendChild(o),e=C(d),e=m+A(e),r=cjce.createElement("cjmd-appbar",{secondary:!0}),f=S[d]&&S[d].color||g,l=cjce.createElement("cjmd-tabs",{color:f,items:S,onChange:function(e){f=S[e].color,l.style.setProperty("--accent-color",f),"search"===h?H("/store/search",{q:u,c:U(d=e)}):k(e)},onActiveClick:function(e){"search"!==h&&k(e)},onMetaClick:x,selectedId:d}),r.appendChild(l),s.appendChild(r),cjBasics.webRequest.handleIframeHeaders([m+"/*bm_iid="+c+"*"],{useMobileUserAgent:!0,handleFirefoxInject:!0}),n=cjce.createElement("bm-iframe",{src:e,solid:"#fff",shadow:!0,onMessage:function(e){var a=e.bm_method,e=e.bm_value;"playPageTitle"===a?(b=e,h||s.cjceSetPageLabel(b)):"playUrlUpdate"===a?function(e){var a=e.pathname;if(a.startsWith("/movies"))return M(),t.pageManager.navigate("movies");if(a.startsWith("/books"))return M(),t.pageManager.navigate("books");var c=null,n=null;a.startsWith("/store/apps")||a.startsWith("/apps")?n="apps":a.startsWith("/store/movies")?n="movies":a.startsWith("/store/books")?n="books":"/store"===a?n="all":"/store/account"===a?c="account":"/store/account/subscriptions"===a?c="subscriptions":"/settings"===a?c="settings":"/wishlist"===a?c="wishlist":"/store/people/details"===a&&-1!==e.search.indexOf(t.account.obfuscatedId)?c="playActivity":a.startsWith("/store/search")&&(c="search",n="all",-1!==e.search.indexOf("c=books")?n="books":-1!==e.search.indexOf("c=apps")?n="apps":-1!==e.search.indexOf("c=movies")&&(n="movies")),(e=l.querySelector('[data-id="all"]'))&&(e.textContent="search"===c?_:j),e="home"!==(c=-1!==["/store","/store/apps","/store/movies","/store/books"].indexOf(a)?"home":c)&&"search"!==c,r.hidden=!n,l.cjceSelectedId=n,f=S[n]&&S[n].color||g,l.style.setProperty("--accent-color",f),B.cjceSelectedId=c,a=T[c],"search"!==c&&(a=a&&a.label||b,s.cjceSetPageLabel(a)),s.cjceSetBackState("home"!==c),s.cjceSetNavigatorCollapseState("search"===c),i.hidden=e,o.hidden=!e,h=c,d=n}(e):"bmCstOpenUrl"===a&&(e=cjBasics.cleanBmUrl(e),t.openTab(e))},onLoad:function(){s.cjceSetLoading(!1)}}),a.appendChild(n)}()});