"use strict";cjce.registerTemplate("bm-p-classroomwithhybrid",function(c,l){var n,a,t,i,r,o,s,d,u,h,m,_,p,j,b,g="https://classroom.google.com",v="/"+l.wizPath,e=cjBasics.uniqueId.generate(),f={bm_cid:"classroomwithhybrid",bm_wiz:"1",bm_cst:"1",bm_iid:e,forcehl:"1",hl:cjBasics.lang.current},C=!cjBasics.wrif.supported||cjBasics.navigator.firefox,w=cjBasics.lang.i18n("cj_i18n_00305","Classroom"),y=cjBasics.lang.i18n("cj_i18n_01255","Classes"),B=!1,S=!1,k="h",E="h",T=new Promise(function(e){a=e}),N=cjBasics.lang.i18n("cj_i18n_06654","Add __link_url__ to a class"),A=cjBasics.lang.i18n("cj_i18n_06653","current url"),L={h:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_01255","Classes"),newTabUrl:!0},calendar:{iconName:"__mdi:calendar_today",label:cjBasics.lang.i18n("cj_i18n_01256","Calendar"),newTabUrl:!0,divider:!0},teachingSubheader:{header:!0,label:cjBasics.lang.i18n("cj_i18n_06577","Teaching")},ta:{iconName:"__mdi:cjg_classroom_to_review",label:cjBasics.lang.i18n("cj_i18n_06622","To review"),newTabUrl:"ta/not-reviewed/all"},enrolledSubheader:{header:!0,label:cjBasics.lang.i18n("cj_i18n_06578","Enrolled")},a:{iconName:"__mdi:cjg_classroom_to_do",label:cjBasics.lang.i18n("cj_i18n_06233","To do"),newTabUrl:"a/not-reviewed/all"},"h/archived":{iconName:"__mdi:archive",label:cjBasics.lang.i18n("cj_i18n_01257","Archived classes"),newTabUrl:!0},s:{iconName:"__mdi:settings",label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),newTabUrl:!0}};function I(e){var t,n,l,c=["h","calendar","h/archived","s"];Array.isArray(e)&&(t=[],l=!(n=[]),e.forEach(function(e){var c="c/"+e.id;e.archived?l=!0:(e.enrolled?n:t).push(c);var a=e.themeData&&e.themeData.color;L[c]={color:a,label:e.label,newTabUrl:!0,colorIcon:!0,icon:{theme:"solid",name:"__mdi:class"}}}),c=["h","calendar"],0<t.length&&(c.push("teachingSubheader","ta"),c=c.concat(t),L[t[t.length-1]].divider=!0),0<n.length&&(c.push("enrolledSubheader","a"),c=c.concat(n),L[n[n.length-1]].divider=!0),l&&c.push("h/archived"),c.push("s"));var a={};c.forEach(function(e){a[e]=L[e],C&&"h"!==e&&(a[e].external=!0)});e=cjce.createElement("bm-navlist",{selectedId:k,items:a,isSelector:!0,onChange:function(e,c){i.cjceSelectedId=k,W(e)},onNewTab:function(e,c){q("string"==typeof c.newTabUrl&&c.newTabUrl||e)}}),c=r.contains(document.activeElement)&&r.classList.contains("cjmd-sheet--open");cjce.replaceChild(r,e,i),c&&r.cjceToggleState(!0),i=e}function q(e){l.openTab(g+v+e)}function x(e){e=e.replace(")]}'",""),e=JSON.parse(e)[0][0][2];return B=!0,e.map(function(c){var a=Date.now().toString();try{a=c[0][0]}catch(e){"string"==typeof c[28]&&(a=c[28].replace("c:",""))}a.length<11?a+="ZZ":a.length<12&&(a+="Z");var a=window.btoa(a),t={};try{t.color=c[9][1],t.backgroundImage=c[9][2].replace("https://gstatic.com/","https://ssl.gstatic.com/")}catch(e){t=null}return{id:a,label:c[5],subLabel:c[8],courseCode:c[10],themeData:t,archived:2===c[20],enrolled:4===c[43],calendarUrl:c[23]}})}function U(e){var c,a,t=JSON.stringify(e);t!==n&&(n=t,t=0<e.length,S||(j.hidden=!t),c=document.createDocumentFragment(),(a=cjce.createElement("cjmd-appbar")).classList.add("bm-p-classroomwithhybrid-quicknav"),["a","ta","calendar"].forEach(function(e){var c=cjce.createElement("cjmd-iconbutton",{iconName:L[e].iconName,label:L[e].label,onClick:function(){W(e)},onMetaClick:function(){q(e)}});a.appendChild(c)}),c.appendChild(a),t&&e.forEach(function(e){e.archived||(e=function(e){var c=e.id,a=document.createElement("div");a.tabIndex=0,a.dataset.id="c/"+c,a.className="bm-p-classroomwithhybrid-card",C&&l.darkMode&&a.classList.add("bm-p-classroomwithhybrid-card--dark");var t,n=document.createElement("header");return n.className="bm-p-classroomwithhybrid-card__top",e.themeData&&(n.style.backgroundColor=e.themeData.color,n.style.backgroundImage='url("'+e.themeData.backgroundImage+'")'),a.appendChild(n),(c=document.createElement("h3")).className="bm-p-classroomwithhybrid-card__title",c.textContent=e.label,n.appendChild(c),e.subLabel&&((t=document.createElement("div")).textContent=e.subLabel,c.appendChild(t)),C||((t=document.createElement("p")).textContent=cjBasics.lang.i18n("cj_i18n_01174","Loading")+"...",t.className="bm-p-classroomwithhybrid-card__loading",a.appendChild(t)),a}(e),c.appendChild(e))}),b.textContent="",b.appendChild(c),I(e),cjgApis.cache.setItem(l.account,"bm_cache_v31__classroom__querycourse",e))}function P(e,c){return cjBasics.ajax(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:cjBasics.urlParams.create(c)}).then(x).then(U)}function D(e){return P(cjBasics.urlParams.attach(g+v+"v7/querycourse",{rt:"j"}),{"f.req":"[[100,null,1,0],[true,true,null,null,true,true,true,true,[null,true,true,true,null,true,[true,true],null,[true],true,true,true,true],true,true,null,null,true,null,null,null,true,null,null,[true,true,true],true,true,null,true,null,null,null,[true,true],true,true,true,true,true,true,true,true,null,true,true,[null,null,true,null,true,true,true,true,true],null,[true,true,true],[true,true],true,true],[[null,[[true]],[]],[],[],[1,2,3],true,[],[1,2]]]",token:e})}function M(){return cjBasics.ajax(g+v).then(function(e){return e.match(/\\"([a-zA-Z0-9-_]{32,36}:\d{12,14})\\"/)[1]}).then(D)}function W(c){var a=!1;function e(){var e;a||(a=!0,e=cjBasics.urlParams.attach(v+c,f),p.cjceSendFrameCommand({method:"bmCstUpdateState",value:e},g),S||H())}T.then(e),setTimeout(e,5e3)}var z={add:"M20 13h-7v7h-2v-7H4v-2h7V4h2v7h7v2z",filter:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z",settings:"M13.85 22.25h-3.7c-.74 0-1.36-.54-1.45-1.27l-.27-1.89c-.27-.14-.53-.29-.79-.46l-1.8.72c-.7.26-1.47-.03-1.81-.65L2.2 15.53c-.35-.66-.2-1.44.36-1.88l1.53-1.19c-.01-.15-.02-.3-.02-.46 0-.15.01-.31.02-.46l-1.52-1.19c-.59-.45-.74-1.26-.37-1.88l1.85-3.19c.34-.62 1.11-.9 1.79-.63l1.81.73c.26-.17.52-.32.78-.46l.27-1.91c.09-.7.71-1.25 1.44-1.25h3.7c.74 0 1.36.54 1.45 1.27l.27 1.89c.27.14.53.29.79.46l1.8-.72c.71-.26 1.48.03 1.82.65l1.84 3.18c.36.66.2 1.44-.36 1.88l-1.52 1.19c.01.15.02.3.02.46s-.01.31-.02.46l1.52 1.19c.56.45.72 1.23.37 1.86l-1.86 3.22c-.34.62-1.11.9-1.8.63l-1.8-.72c-.26.17-.52.32-.78.46l-.27 1.91c-.1.68-.72 1.22-1.46 1.22zm-3.23-2h2.76l.37-2.55.53-.22c.44-.18.88-.44 1.34-.78l.45-.34 2.38.96 1.38-2.4-2.03-1.58.07-.56c.03-.26.06-.51.06-.78s-.03-.53-.06-.78l-.07-.56 2.03-1.58-1.39-2.4-2.39.96-.45-.35c-.42-.32-.87-.58-1.33-.77l-.52-.22-.37-2.55h-2.76l-.37 2.55-.53.21c-.44.19-.88.44-1.34.79l-.45.33-2.38-.95-1.39 2.39 2.03 1.58-.07.56a7 7 0 0 0-.06.79c0 .26.02.53.06.78l.07.56-2.03 1.58 1.38 2.4 2.39-.96.45.35c.43.33.86.58 1.33.77l.53.22.38 2.55z"};function O(e){e='body > nav div[soy-server-key] div > div[role] path[d*="'+z[e]+'"]';p.cjceSendFrameCommand({method:"bmCstClickParentElement",value:{selector:e,depth:2}},g)}var F,R=cjBasics.urlParams.attach(g+v+k,f);function H(){S||(S=!0,j.remove(),t.cjceSetLoading(!1))}function Z(){var e=(i.cjceSelectedId=k)in L;t.cjceSetBackState(!e),o.hidden="h"!==k,u.hidden="calendar"!==k,h.hidden="calendar"!==k;var c=k.startsWith("c/")&&-1===E.indexOf("/a/");c&&(_||(e={c:cjBasics.lang.i18n("cj_i18n_06655","Stream"),w:cjBasics.lang.i18n("cj_i18n_06656","Classwork"),r:cjBasics.lang.i18n("cj_i18n_00295","People")},_=cjce.createElement("cjmd-appbar",{secondary:!0}),m=cjce.createElement("cjmd-tabs",{items:e,onChange:function(e){W(k.replace("c",e))},onMetaClick:function(e){q(k.replace("c",e))},selectedId:"c"}),_.appendChild(m),t.appendChild(_)),m.cjceSelectedId=E[0]),d.hidden=!c,_&&(_.hidden=!c);c=L[k],c=c&&c.color;t.style.setProperty("--accent-color",c||"")}function J(){c.textContent="";var e=cjce.createElement("bm-fulldialog",{bmApis:l,onNewTab:function(){q("h")},lockup:{label:w},iconName:"classroom",message:cjBasics.lang.i18n("cj_i18n_06625","You can't use __product_name__ with this account.").replace("__product_name__",w),actionLabel:cjBasics.lang.i18n("cj_i18n_01543","Switch account"),action:function(){l.pageManager.navigate("accountchooser")}});c.appendChild(e)}cjBasics.webRequest.handleIframeHeaders([g+"/*bm_iid="+e+"*"],{disableOgs:g,handleFirefoxInject:!0}),t=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"classroom",serviceLabel:w,pageLabel:y,bmApis:l,onBack:function(){p.cjceSendFrameCommand({method:"bmCstNavigateBack"},g)},onNewTab:function(){p.cjceGetCleanUrl(g).then(function(e){e?l.openTab(e):q("h")})}}),c.appendChild(t),(s=cjce.createElement("cjmd-iconbutton",{iconName:"__mdi:link",label:N.replace("__link_url__",A),onClick:function(){W("share?url="+encodeURIComponent(A)),setTimeout(function(){s.remove()},200)}})).hidden=!0,cjBasics.navigator.getActionableUrl().then(function(e){e?(s.hidden=!1,t.cjceAppendChild(s),A=e.url,s.title=N.replace("__link_url__",A)):s.remove()}),C||(o=cjce.createElement("cjmd-iconbutton",{iconName:"__mdi:add",label:cjBasics.lang.i18n("cj_i18n_06579","Create or join a class"),onClick:function(){S||W("h"),O("add")}}),t.cjceAppendChild(o),(d=cjce.createElement("cjmd-iconbutton",{iconName:"__mdi:settings",label:cjBasics.lang.i18n("cj_i18n_06580","Class settings"),onClick:function(){O("settings")}})).hidden=!0,t.cjceAppendChild(d),(u=cjce.createElement("cjmd-iconbutton",{iconName:"__mdi:today",label:cjBasics.lang.i18n("cj_i18n_01253","Today"),onClick:function(){W("calendar/this-week/course/all")}})).hidden=!0,t.cjceAppendChild(u),(h=cjce.createElement("cjmd-iconbutton",{iconName:"__mdi:filter_list",onClick:function(){O("filter")}})).hidden=!0,t.cjceAppendChild(h)),t.cjceAppendChild(s),r=t.cjceDrawerEl,I(),cjBasics.webRequest.catchAndStop([g+v+"ineligible*"],J,!0),p=cjce.createElement("bm-iframe",{src:R,solid:"#fff",shadow:!0,onMessage:function(e){var c=e.bm_method,a=e.bm_value;"classroomwithhybridViewData"===c?(E=a.pathname,v=a.mainServicePath,k="h/archived"===(e=E)?e:!e||"h"===e||e.startsWith("h/")?"h":"calendar"===e||e.startsWith("calendar/")?"calendar":"ta"===e||e.startsWith("ta/")?"ta":"a"===e||e.startsWith("a/")?"a":-1===e.indexOf("/a/")&&(e.startsWith("r/")||e.startsWith("w/")||e.startsWith("c/"))?"c/"+e.split("/")[1].split("/")[0]:e,Z(),(e=(e=L[k])&&e.label)||(e=a.title.split(" -")[0].split(" –")[0])&&e!==w||(e=y),E.startsWith("share")&&(e=N.replace("__link_url__",A)),t.cjceSetPageLabel(e)):"classroomwithhybridLoadingState"===c&&(t.cjceSetLoading(a),a||S||H())}}),c.appendChild(p),(j=document.createElement("div")).classList.add("bm-p-classroomwithhybrid-dummy"),b=cjce.createElement("cjmd-container",{solid:!!C||"#fff",scrollable:!0,shadow:"thinOnScroll"}),j.appendChild(b),cjce.applyTemplate(b,"basic-anyclickhandler",{onClick:function(e){var c=document.activeElement,c=c&&c.dataset.id;c&&(c=c,(C||cjBasics.events.hasMeta(e)?q:W)(c))}}),c.appendChild(j),cjgApis.cache.getItem(l.account,"bm_cache_v31__classroom__querycourse").then(function(e){!B&&Array.isArray(e)&&U(e)}),C||(F=["https://classroom.google.com/u/"+l.account.authuser+"/v*/querycourse?*"],"0"===l.account.authuser&&F.push("https://classroom.google.com/v*/querycourse?*"),cjBasics.webRequest.addListener("onBeforeRequest",function(e){var c;"POST"===e.method&&e.initiator.startsWith(g)&&(a(),c=e.requestBody.formData,JSON.stringify(c).match(/[["\d{11,13}"]]/)||P(e.url,c))},{urls:F,types:["xmlhttprequest"]},["requestBody"])),M().then(function(){C&&t.cjceSetLoading(!1)})});