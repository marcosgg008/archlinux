"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cjce.registerTemplate("bm-p-movies",function(a,o){var c,e=cjBasics.geo.isUsaCheck();e||(c="solid",a.classList.add("bm-ele-app--yttheme"),a.style.setProperty("--accent-color","#f5221b"));var n,i,r,s=["https://www.googleapis.com/auth/android_video"],l=window.atob("QUl6YVN5QUgwcURTVzk3M0xPeEUtRmZmbDdaNWVZVFdCQ0FXT20w"),u="home",t="https://play.google.com",m=t+"/store/",d=m+"movies",p="authuser="+o.account.authuser,_=d+"?"+p,h=t+"/movies?"+p,g={home:{label:e?cjBasics.lang.i18n("cj_i18n_01055","For you"):cjBasics.lang.i18n("cj_i18n_00291","Home"),iconName:"__mdi:home",newTabUrl:_},library:{label:cjBasics.lang.i18n("cj_i18n_00131","Library"),iconName:"__mdi:library_movies",divider:!0,newTabUrl:h},play:{label:cjBasics.lang.i18n("cj_i18n_00134","Shop"),iconName:"__mdi:shop",newTabUrl:_,external:!cjBasics.wrif.supported},save:{label:e?cjBasics.lang.i18n("cj_i18n_06670","Watchlist"):cjBasics.lang.i18n("cj_i18n_00550","Wishlist"),iconName:"__mdi:cjg_wishlist",external:!0,newTabUrl:e?"https://www.google.com/search?q=my+watchlist&stick=H4sIAAAAAAAAABPi1U_XNzTMMLQ0TopPNn3EqMYt8PLHPWEp2UlrTl5jFOcSDEgtKs7PS8wJTyxJzsjJLC6xYtJg5FnEypNbqVAOEwMAB_LtUkcAAAA&"+p:"https://play.google.com/wishlist?"+p},purchases:{label:cjBasics.lang.i18n("cj_i18n_01247","YouTube purchases"),iconName:"__mdi:local_offer",external:!0,newTabUrl:cjgApis.url.youtube(o.account,"feed/purchases")},managepurchases:{label:cjBasics.lang.i18n("cj_i18n_01248","Manage purchases"),iconName:"__mdi:account_balance_wallet",external:!0,newTabUrl:cjgApis.url.youtube(o.account,"purchases")}};function j(e){var t;e&&"not_authorized"===e.cjg_error&&(a.textContent="",t=cjce.createElement("bm-fulldialog",{theme:c,lockup:{label:cjBasics.lang.i18n("cj_i18n_01205","Movies")},iconName:"youtube_movies",message:cjBasics.lang.i18n("cj_i18n_01249","Before you can use this page, you need to give access to your movies"),actionLabel:cjBasics.lang.i18n("cj_i18n_01916","Continue with Google"),actionG:!0,action:function(){cjgApis.auth.requestPermissions(o.account,e.cjg_missing_scopes)}}),a.appendChild(t))}function b(e){return e&&"object"===_typeof(e)&&Array.isArray(e.resource)?e.resource.map(function(e){var t,a=e.metadata;return{title:a.title,year:(t=a.release_date_timestamp_sec,t=parseInt(t+"000",10),new Date(t).getUTCFullYear()),thumbnail:function(e){for(var t=196*window.devicePixelRatio,a=1;a<e.length;a++)if(e[a].width<t)return e[a-1].url;return e[0].url}(a.images),duration:(a=a.duration_sec,Math.round(a/60)),id:e.resource_id.id}}):[]}function y(e,t){t=t||{};t.alt="json",t.prettyPrint="false";t=cjBasics.urlParams.attach("https://content.googleapis.com/android_video/v1/"+e,t);return cjgApis.request(t,{fetchAs:"json"},{key:l,account:o.account,requiredScopes:s}).catch(j)}function f(){return y("recommendation",{cat:"type=movie",cr:"NL",if:"imobrg",lr:"en_US",max:"9"})}function v(e){return y("asset/list",{cr:"NL",fs:"peg",id:"yt:movie:"+e.join(",yt:movie:"),if:"imobrg",lr:"en_US"})}function w(){return y("userlibrary",{max:"20"}).then(function(e){return e&&"object"===_typeof(e)&&Array.isArray(e.resource)?e.resource.map(function(e){return e.resource_id.id}):[]}).then(v)}function B(e){if(0===e.length)return cjce.createElement("cjmd-emptystate",{theme:c,color:!0,iconName:"__mdi:play_movies",label:cjBasics.lang.i18n("cj_i18n_00156","No results")});for(var t=cjce.createElement("cjmd-grid"),a=0;a<e.length;a++){var n=function(t){var e=cjce.createElement("cjmd-griditem",{onClick:function(){var e=cjBasics.urlParams.attach(d+"/details",{id:t.id,authuser:o.account.authuser});o.openTab(e)}}),a=document.createElement("div");a.className="bm-p-movies-thumbnail",a.style.backgroundImage='url("'+t.thumbnail+'")',e.appendChild(a);var n=document.createElement("div");n.className="cjmd-grid__item__bottom",e.appendChild(n);var c=document.createElement("div");c.className="cjmd-grid__item__textcontainer",n.appendChild(c);var i=document.createElement("div");return i.textContent=t.title||cjBasics.lang.i18n("cj_i18n_00380","Movie"),c.appendChild(i),a=[],"number"==typeof t.year&&a.push(t.year),"number"==typeof t.duration&&1<t.duration&&a.push(t.duration+" mins"),0<a.length&&((n=document.createElement("div")).className="cjmd-secondarytext",n.textContent=a.join(", "),c.appendChild(n)),20<t.title.length&&(i.title=t.title),e}(e[a]);t.appendChild(n)}return t}function A(e){if("play"===e)return o.pageManager.navigate(e,{typeId:"movies"}),void(r.cjceSelectedId=u);var t=g[u=e];n.cjceSetPageLabel(t.label),n.cjceSetLoading(!0),i.textContent="",("library"===e?w:f)().then(b).then(B).then(function(e){i.appendChild(e),n.cjceSetLoading(!1)})}n=cjce.createElement("bm-ogb",{loading:!0,theme:c,drawer:{color:!0},serviceIcon:e?"tv":"youtube_movies",serviceLabel:e?cjBasics.lang.i18n("cj_i18n_06402","Google TV"):cjBasics.lang.i18n("cj_i18n_01205","Movies"),pageLabel:e?cjBasics.lang.i18n("cj_i18n_01055","For you"):cjBasics.lang.i18n("cj_i18n_00291","Home"),searchbox:{color:!0,submitInNewTab:!0,onSubmit:function(e){e=cjBasics.urlParams.attach(m+"search",{c:"movies",authuser:o.account.authuser,hl:cjBasics.lang.current,q:e});o.openTab(e)}},bmApis:o,onNewTab:function(){var e="library"===u?h:_;o.openTab(e)}}),a.appendChild(n),r=cjce.createElement("bm-navlist",{theme:c,isSelector:!0,selectedId:u,items:g,onChange:A,onNewTab:function(e,t){o.openTab(t.newTabUrl)}}),n.cjceDrawerEl.appendChild(r),i=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),a.appendChild(i),o.setOnPageDisplayHandler(n.cjceSearchboxEl.select),A(u)});