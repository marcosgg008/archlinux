"use strict";!function(){var w="id,webViewLink,shortcutDetails,exportLinks,webContentLink,iconLink,name,mimeType,capabilities(canTrash,canUntrash,canRename,canDownload),modifiedTime,shared,starred,trashed,thumbnailLink,folderColorRgb",b=["https://www.googleapis.com/auth/drive"],B="https://content.googleapis.com/drive/v3/",t={archive:{name:"__mdi:drive_archive"},audio:{name:"__mdi:drive_audio",color:"#ea4335"},jam:{name:"__mdi:cj_jam_drive",color:"#fb8c00"},appmaker:{name:"__mdi:cjg_app_maker",color:"#ef6c00"},datareport:{name:"__mdi:cj_gmp_data_studio_report",color:"#1a73e8"},chart:{name:"__mdi:drive_chart",color:"#34a853"},document:{name:"__mdi:drive_document",color:"#4285f4"},drawing:{name:"__mdi:drive_drawing",color:"#ea4335"},earth:{name:"__mdi:earth",color:"#4285f4"},excel:{name:"__mdi:drive_ms_excel",color:"#34a853"},form:{name:"__mdi:drive_form",color:"#673ab7"},fusion:{name:"__mdi:drive_fusiontable",color:"#34a853"},generic:{name:"__mdi:drive_file",color:"#1a73e8"},image:{name:"__mdi:drive_image",color:"#ea4335"},keep:{name:"__mdi:lightbulb",color:"#fbbc05"},map:{name:"__mdi:file_map",color:"#ea4335"},pdf:{name:"__mdi:drive_pdf",color:"#fe4a22"},powerpoint:{name:"__mdi:drive_ms_powerpoint",color:"#ff752a"},presentation:{name:"__mdi:drive_presentation",color:"#fbbc05"},script:{name:"__mdi:drive_script",color:"#1a73e8"},sites:{name:"__mdi:atari_site",color:"#3e50b4"},spreadsheet:{name:"__mdi:drive_spreadsheet",color:"#34a853"},text:{name:"__mdi:drive_text",color:"#1a73e8"},video:{name:"__mdi:drive_video",color:"#ea4335"},word:{name:"__mdi:drive_ms_word",color:"#4583ea"},shortcut:{name:"__mdi:shortcut"},zip:{name:"__mdi:drive_zip"},upload:{name:"__mdi:file_upload"}},e={docs:{portalLabel:cjBasics.lang.i18n("cj_i18n_01289","Docs Suite"),serviceLabel:cjBasics.lang.i18n("cj_i18n_00391","Docs"),entityName:cjBasics.lang.i18n("cj_i18n_00099","documents"),newFileLabel:cjBasics.lang.i18n("cj_i18n_00607","New document"),iconName:"docs",hasTemplates:!0,emptyStateIcon:"__mdi:drive_document",primaryColor:"#4285f4",docPath:"document",mimeTypes:["application/msword","application/vnd.google-apps.document","application/vnd.ms-word","application/vnd.ms-word.document.12","application/vnd.ms-word.document.macroEnabled.12","application/vnd.msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]},sheets:{portalLabel:cjBasics.lang.i18n("cj_i18n_01289","Docs Suite"),serviceLabel:cjBasics.lang.i18n("cj_i18n_00393","Sheets"),entityName:cjBasics.lang.i18n("cj_i18n_00100","spreadsheets"),newFileLabel:cjBasics.lang.i18n("cj_i18n_00608","New spreadsheet"),iconName:"sheets",hasTemplates:!0,emptyStateIcon:"__mdi:drive_spreadsheet",primaryColor:"#34a853",primaryLoadingColor:!0,docPath:"spreadsheets",mimeTypes:["application/msexcel","application/vnd.google-apps.spreadsheet","application/vnd.ms-excel","application/vnd.ms-excel.document.12","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.msexcel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]},slides:{portalLabel:cjBasics.lang.i18n("cj_i18n_01289","Docs Suite"),serviceLabel:cjBasics.lang.i18n("cj_i18n_00407","Slides"),entityName:cjBasics.lang.i18n("cj_i18n_00101","presentations"),newFileLabel:cjBasics.lang.i18n("cj_i18n_00609","New presentation"),iconName:"slides",hasTemplates:!0,emptyStateIcon:"__mdi:drive_presentation",primaryColor:"#f5a900",primaryLoadingColor:!0,docPath:"presentation",mimeTypes:["application/mspowerpoint","application/vnd.google-apps.presentation","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint.document.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.mspowerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"]},forms:{portalLabel:cjBasics.lang.i18n("cj_i18n_01289","Docs Suite"),serviceLabel:cjBasics.lang.i18n("cj_i18n_00408","Forms"),entityName:cjBasics.lang.i18n("cj_i18n_00102","forms"),newFileLabel:cjBasics.lang.i18n("cj_i18n_00631","New form"),iconName:"forms",hasTemplates:!0,emptyStateIcon:"__mdi:drive_form",primaryColor:"#673ab7",primaryLoadingColor:!0,docPath:"forms",mimeTypes:["application/vnd.google-apps.form","application/vnd.google-apps.freebird"]},drawings:{portalLabel:cjBasics.lang.i18n("cj_i18n_01289","Docs Suite"),serviceLabel:cjBasics.lang.i18n("cj_i18n_01270","Drawings"),entityName:cjBasics.lang.i18n("cj_i18n_00103","drawings"),newFileLabel:cjBasics.lang.i18n("cj_i18n_06298","New drawing"),iconName:"drawings",emptyStateIcon:"__mdi:drive_drawing",primaryColor:"#ea4335",primaryLoadingColor:!0,noExternalSearch:!0,docPath:"drawings",mimeTypes:["application/illustrator","application/vnd.google-apps.drawing","application/vnd.oasis.opendocument.graphics","image/vnd.adobe.photoshop","image/x-photoshop"]},atari:{portalLabel:cjBasics.lang.i18n("cj_i18n_00112","Sites"),serviceLabel:cjBasics.lang.i18n("cj_i18n_00112","Sites"),entityName:cjBasics.lang.i18n("cj_i18n_00105","sites"),newFileLabel:cjBasics.lang.i18n("cj_i18n_00688","New site"),iconName:"sites",emptyStateIcon:"__mdi:atari_site",primaryColor:"#3f51b5",primaryLoadingColor:!0,mainShortcutId:"405",mimeTypes:["application/vnd.google-apps.sites","application/vnd.google-apps.site"]},jamboard:{serviceLabel:cjBasics.lang.i18n("cj_i18n_00813","Jamboard"),pageLabel:cjBasics.lang.i18n("cj_i18n_01290","Jams"),entityName:cjBasics.lang.i18n("cj_i18n_01291","jams"),newFileLabel:cjBasics.lang.i18n("cj_i18n_01948","New jam"),iconName:"jamboard",emptyStateIcon:"__mdi:cj_jam_drive",primaryColor:"#fb8c00",mainShortcutId:"740",mimeTypes:["application/vnd.google-apps.jam"]},script:{serviceLabel:cjBasics.lang.i18n("cj_i18n_00447","Apps Script"),pageLabel:cjBasics.lang.i18n("cj_i18n_01293","Projects"),entityName:cjBasics.lang.i18n("cj_i18n_01294","scripts"),iconName:"script",emptyStateIcon:"__mdi:drive_script",primaryColor:"#1a73e8",listview:!0,noViewToggle:!0,mainShortcutId:"126",mimeTypes:["application/vnd.google-apps.script","application/vnd.google-apps.appmaker"]},datastudio:{serviceLabel:cjBasics.lang.i18n("cj_i18n_00333","Data Studio"),pageLabel:cjBasics.lang.i18n("cj_i18n_01299","Reports"),entityName:cjBasics.lang.i18n("cj_i18n_00098","reports"),iconName:"data_studio",emptyStateIcon:"__mdi:cj_gmp_data_studio_report",primaryColor:"#1a73e8",whiteTheme:!0,listview:!0,noViewToggle:!0,mainShortcutId:"366",mimeTypes:["application/vnd.google-analytics.rap.report"]},mymaps:{portalLabel:cjBasics.lang.i18n("cj_i18n_00423","Maps"),serviceLabel:cjBasics.lang.i18n("cj_i18n_00410","My Maps"),entityName:cjBasics.lang.i18n("cj_i18n_00104","maps"),newFileLabel:cjBasics.lang.i18n("cj_i18n_06299","New map"),iconName:"my_maps",emptyStateIcon:"__mdi:place",primaryColor:"#ea4335",noExternalSearch:!0,mainShortcutId:"167",mimeTypes:["application/vnd.google-apps.map"]}};cjgApis.docEditors=e;var o={"application/msword":"word","application/octet-stream":"generic","application/pdf":"pdf","application/vnd.google-analytics.rap.report":"datareport","application/vnd.google-apps.appmaker":"appmaker","application/vnd.google-apps.audio":"audio","application/vnd.google-apps.document":"document","application/vnd.google-apps.drawing":"drawing","application/vnd.google-apps.file":"generic","application/vnd.google-apps.form":"form","application/vnd.google-apps.fusiontable":"fusion","application/vnd.google-apps.jam":"jam","application/vnd.google-apps.map":"map","application/vnd.google-apps.photo":"image","application/vnd.google-apps.presentation":"presentation","application/vnd.google-apps.script":"script","application/vnd.google-apps.shortcut":"shortcut","application/vnd.google-apps.site":"sites","application/vnd.google-apps.sites":"sites","application/vnd.google-apps.spreadsheet":"spreadsheet","application/vnd.google-apps.unknown":"generic","application/vnd.google-apps.video":"video","application/vnd.ms-excel":"excel","application/vnd.ms-powerpoint":"powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation":"powerpoint","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"excel","application/zip":"archive","vnd.openxmlformats-officedocument.wordprocessingml.document":"word"};function l(e,i){var a=i.targetMimeType,n=o[a];if(n)return t[n];if(i.isFolder){i=(e.folderColorRgb||"").toLowerCase();return{name:e.shared?"__mdi:folder_shared":"__mdi:folder",color:i&&-1===i.indexOf("8f8f8f")&&-1===i.indexOf("5f6368")?i:null}}if(a.startsWith("image/"))return t.image;if(a.startsWith("video/"))return t.video;if(a.startsWith("audio/"))return t.audio;if(a.startsWith("text/"))return t.text;e=e.iconLink;return{url:e=-1!==e.indexOf("googleusercontent.com/16/type/")?e.replace("/16/type/","/32/type/"):e,size:18}}function C(e,i){e=new URL(e.webViewLink);return e.searchParams.delete("usp"),i&&i.authuser&&"0"!==i.authuser&&e.searchParams.set("authuser",i.authuser),e.href}function s(e){var i=document.createElement("a");i.href=e,i.download=!0,i.style.cssText="all:initial !important;visibility: hidden !important;opacity:0 !important;pointer-events: none !important;position: fixed !important;",i.textContent="Download",document.body.appendChild(i),i.click(),setTimeout(function(){i.remove()},1e4)}function d(n,t,o,e){var c=o.starred,r=o.trashed,i=o.capabilities,a={openInNew:{iconName:"__mdi:open_in_new",label:cjBasics.lang.i18n("cj_i18n_01545","Open in a new tab")},copyLink:{iconName:"__mdi:link",label:cjBasics.lang.i18n("cj_i18n_01901","Copy link")},starred:{iconName:c?"__mdi:star":"__mdi:star_border",label:c?cjBasics.lang.i18n("cj_i18n_01902","Remove from Starred"):cjBasics.lang.i18n("cj_i18n_01903","Add to Starred")},rename:{iconName:"__mdi:cjg_rename",label:cjBasics.lang.i18n("cj_i18n_01940","Rename")},trash:{iconName:r?"__mdi:history":"__mdi:delete",label:r?cjBasics.lang.i18n("cj_i18n_01905","Restore"):cjBasics.lang.i18n("cj_i18n_01904","Move to Trash")},locate:{iconName:"cj_search_in_new",label:cjBasics.lang.i18n("cj_i18n_06565","Locate in new")},download:{iconName:"__mdi:file_download",label:cjBasics.lang.i18n("cj_i18n_01622","Download")},downloadPdf:{iconName:"__mdi:file_download",label:cjBasics.lang.i18n("cj_i18n_06326","Download as PDF")}};return e||delete a.openInNew,i.canRename||delete a.rename,o.exportLinks&&o.exportLinks["application/pdf"]||delete a.downloadPdf,o.webContentLink&&i.canDownload||delete a.download,(r?i.canUntrash:i.canTrash)||delete a.trash,cjce.createElement("cjmd-iconbuttonmenu",{label:cjBasics.lang.i18n("cj_i18n_06294","More actions"),items:a,compact:!0,onClick:function(e){var i,a;"trash"===e?_(t,o.id,{trashed:!r}).then(function(e){e&&n.remove()}):"starred"===e?_(t,o.id,{starred:!c}).then(function(e){e&&(c=!c,o.starred=c,(e=n.querySelector(".cjg-doclist__listitem__staricon"))&&e.classList.toggle("cjg-doclist__listitem__staricon--starred",c))}):"copyLink"===e?cjBasics.clipboard.copy(C(o)):"rename"===e?function(a,e,n){var t=cjce.createElement("cjmd-textfield",{label:cjBasics.lang.i18n("cj_i18n_01943","File name")}),o=cjBasics.lang.i18n("cj_i18n_01942","Untitled file");t.cjceValue=n.name||o;var i=cjce.createElement("cjmd-dialog",{title:cjBasics.lang.i18n("cj_i18n_01941","Rename file"),message:cjBasics.lang.i18n("cj_i18n_01944","Please enter a file name"),confirmLabel:cjBasics.lang.i18n("cj_i18n_01940","Rename"),cancelLabel:cjBasics.lang.i18n("cj_i18n_01659","Cancel"),additionalFragment:t,onConfirm:function(){var i=t.cjceValue||o;_(e,n.id,{name:i}).then(function(e){e&&(a.querySelector(".cjmd-item__header").textContent=i)})}});document.body.appendChild(i),setTimeout(function(){i.showModal(),i=null,t.cjceSelect()})}(n,t,o):"openInNew"===e||"locate"===e?(a="https://drive.google.com/drive/","0"!==(i=t.gAccount.authuser)&&(a+="u/"+i+"/"),a="openInNew"===e?a+"folders/"+o.id:cjBasics.urlParams.attach(a,{action:"locate",id:o.id}),t.openInNew(a)):"download"===e?s(o.webContentLink):"downloadPdf"===e&&s((a=t.gAccount,e="application/pdf",(e=new URL(o.exportLinks[e])).searchParams.delete("usp"),a&&a.authuser&&"0"!==a.authuser&&e.searchParams.set("authuser",a.authuser),e.href))}})}function L(e){return cjce.createElement("cjmd-emptystate",{label:(i=e,cjBasics.lang.i18n("cj_i18n_02174","No __entity_name__ found").replace("__entity_name__",i.entityName)),subLabel:(i=e).searching?cjBasics.lang.i18n("cj_i18n_00116","Try a synonym or more general keyword"):i.noNewFile?cjBasics.lang.i18n("cj_i18n_02175","You can add new __entity_name__ using the button below").replace("__entity_name__",i.entityName):null,iconName:e.emptyStateIcon,color:e.primaryColor});var i}var i,p,a=(i=/\\(u\{([0-9A-Fa-f]+)\}|u([0-9A-Fa-f]{4})|x([0-9A-Fa-f]{2})|([1-7][0-7]{0,2}|[0-7]{2,3})|(['"tbrnfv0\\]))|\\U([0-9A-Fa-f]{8})/g,p={0:"\0",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v","'":"'",'"':'"',"\\":"\\"},function(e){return e.replace(i,function(e,i,a,n,t,o,c,r){return a?m(a):n?m(n):t?m(t):o?String.fromCodePoint(parseInt(o,8)):r?m(r):p[c]})});function m(e){return String.fromCodePoint(parseInt(e,16))}function N(n){return cjBasics.ajax("https://drive.google.com/drive/u/"+n.gAccount.authuser+"/priority?id="+cjBasics.uniqueId.generate()).then(function(e){e=e.split("window['_DRIVE_dsp'][ 3.0 ] = '")[1].split("'")[0],e=a(e);return JSON.parse(JSON.parse(e)[2]).item.sort(function(e,i){return e.confidenceScore>i.confidenceScore?-1:1}).map(function(e){return e.itemId})}).catch(function(){return[]}).then(function(e){return Promise.all(e.map(function(e){return i=n,a=e,a=cjBasics.urlParams.attach(B+"files/"+e,{prettyPrint:"false",supportsAllDrives:"true",fields:w}),cjgApis.request(a,{fetchAs:"json"},{account:i.gAccount,requiredScopes:b}).then(function(e){return e.hasThumbnail="thumbnailLink"in e,delete e.thumbnailLink,e},function(){return{}});var i,a}))})}function _(e,i,a){var n=cjBasics.urlParams.attach(B+"files/"+i,{prettyPrint:"false",supportsAllDrives:"true",includeItemsFromAllDrives:"true",fields:"id"});return cjgApis.request(n,{fetchAs:"json",method:"PATCH",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}},{account:e.gAccount,requiredScopes:b}).then(function(e){return e&&e.id===i})}function S(e,i){var a=e.shortcutDetails&&e.shortcutDetails.targetMimeType||e.mimeType,n="application/vnd.google-apps.folder"===a,a={targetMimeType:a,isFolder:n},i=(i.listview?function(e,i,a){var n=i.isFolder,t=cjce.createElement("cjmd-item"),o=l(e,i),i=cjce.createElement("cjmd-icon",{theme:"solid",name:o.name,url:o.url,size:o.size,color:o.color||a.defaultFileColor});o.url&&i.classList.add("cjg-doclist__listitem__customicon"),e.shortcutDetails&&((r=document.createElement("div")).className="cjg-doclist__listitem__shortcuticon",i.appendChild(r)),t.appendChild(i),(o=document.createElement("div")).className="cjmd-item__body";var c,r=document.createElement("div");return r.className="cjmd-item__header",r.textContent=e.name,o.appendChild(r),e.shared&&!n&&((i=cjce.createElement("cjmd-icon",{theme:"solid",name:"__mdi:people",size:20})).classList.add("cjg-doclist__listitem__infoicon"),r.appendChild(i)),a.isStarredView||((c=cjce.createElement("cjmd-icon",{theme:"solid",name:"__mdi:star",size:20})).classList.add("cjg-doclist__listitem__infoicon","cjg-doclist__listitem__staricon"),e.starred&&c.classList.add("cjg-doclist__listitem__staricon--starred"),r.appendChild(c)),e.modifiedTime&&(r=document.createElement("div"),c=cjBasics.datetime.printDateString(e.modifiedTime,{alwaysYear:!0}),r.className="cjmd-secondarytext",r.textContent=" "+cjBasics.lang.i18n("cj_i18n_00006","modified")+": "+c,o.appendChild(r)),t.appendChild(o),(o=document.createElement("div")).className="cjmd-item__hovertools",t.appendChild(o),n&&((n=cjce.createElement("cjmd-iconbutton",{iconName:"__mdi:open_in_new",label:cjBasics.lang.i18n("cj_i18n_00123","Open folder in new tab")})).dataset.id=e.id,n.dataset.openInNew="1",n.classList.add("cjg-doclist__fileitem"),o.appendChild(n)),e=d(t,a,e),o.appendChild(e),t}:function(e,i,a){var n=i.isFolder,t=a.foldersOnTop&&n,o=cjce.createElement("cjmd-griditem");o.classList.add("cjg-doclist__griditem");var c,r,s=l(e,i);return t||((c=document.createElement("div")).className="cjg-doclist__griditem__thumbnail","__mdi:drive_image"===s.name&&c.classList.add("cjg-doclist__griditem__thumbnail--photo"),o.appendChild(c),e.hasThumbnail?(c.classList.add("cjg-doclist__griditem__thumbnail--customimage"),i=cjBasics.urlParams.attach("https://drive.google.com/thumbnail",{authuser:a.gAccount.authuser,id:e.id,sz:"w"+Math.ceil(144*window.devicePixelRatio)}),c.style.backgroundImage='url("'+i+'")'):(r=cjce.createElement("cjmd-icon",{theme:"solid",size:96,color:a.darkMode?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, .15)",name:s.name}),c.appendChild(r))),a.hideLabels?o.classList.add("cjg-doclist__griditem--nolabels"):((c=document.createElement("div")).className="cjmd-grid__item__bottom cjg-doclist__griditem__bottom",o.appendChild(c),(r=cjce.createElement("cjmd-icon",{theme:"solid",name:s.name,color:s.color||a.defaultFileColor,url:s.url,size:s.size})).classList.add("cjg-doclist__griditem__icon"),c.appendChild(r),(s=document.createElement("div")).className="cjmd-grid__item__textcontainer",c.appendChild(s),(r=document.createElement("span")).className="cjg-doclist__griditem__tools",c.appendChild(r),n=d(o,a,e,t&&n),r.appendChild(n),n=document.createElement("div"),e=e.name||cjBasics.lang.i18n("cj_i18n_06564","File"),n.textContent=e,s.appendChild(n),20<e.length&&(n.title=e)),o})(e,a,i);return i.classList.add("cjg-doclist__fileitem"),i.dataset.id=e.id,i.tabIndex=0,n||(i.dataset.openInNew="1"),i}cjce.registerTemplate("cjg-doclist",function(o,n){var c=n.orderBy&&-1!==n.orderBy.indexOf("older"),r={},s={openInNew:n.openInNew,gAccount:n.gAccount,noNewFile:n.noNewFile,additionalFragment:n.additionalFragment,listview:n.listview,entityName:n.entityName||cjBasics.lang.i18n("cj_i18n_00144","files"),emptyStateIcon:n.emptyStateIcon||"__mdi:drive_file",primaryColor:n.primaryColor||"#1a73e8",searching:n.searching||!1,cachingId:n.cachingId||null,hideLabels:n.hideLabels,priority:n.priority,foldersOnTop:c,isStarredView:n.q&&-1!==n.q.indexOf("starred"),darkMode:n.darkMode,defaultFileColor:n.darkMode?"#bdc1c6":"#5f6368"},e=Math.round(document.documentElement.offsetHeight*document.documentElement.offsetWidth/7500),t={orderBy:n.orderBy,q:n.q,priority:n.priority,pageSize:e=e<50?50:e,gAccount:s.gAccount};cjce.applyTemplate(o,"cjmd-container",{scrollable:!0,fabPadding:!n.noFabs,shadow:n.shadow||"transparentOnScroll",infiniteScroll:!0}),cjce.applyTemplate(o,"basic-anyclickhandler",{onClick:function(e){var i,a=document.activeElement;a.classList.contains("cjg-doclist__fileitem")&&(i=a.dataset.id,e=!n.onFolderClick||cjBasics.events.hasMeta(e)||"1"===a.dataset.openInNew,a=r[i],(a=(i=a).shortcutDetails)&&((i=JSON.parse(JSON.stringify(i))).mimeType=a.targetMimeType,i.id=a.targetId,i.webViewLink=a.webViewLink||"https://drive.google.com/file/d/"+a.targetId+"/view",delete i.shortcutDetails),i=i,e?(e=C(i,s.gAccount),s.openInNew(e)):n.onFolderClick(i))}});var a=cjce.createElement("cjmd-subheader",{label:cjBasics.lang.i18n("cj_i18n_00121","Folders"),color:!0}),l=cjce.createElement("cjmd-subheader",{label:cjBasics.lang.i18n("cj_i18n_00122","Files"),color:!0}),e=s.listview?"cjmd-list":"cjmd-grid",d=cjce.createElement(e),p=cjce.createElement(e);s.listview||(d.classList.add("cjg-doclist__grid"),p.classList.add("cjg-doclist__grid"));var m=document.createDocumentFragment(),_=document.createDocumentFragment(),g=!1,u=!1;function j(e){n.onLoadingChange&&o.parentNode&&n.onLoadingChange(e)}function h(e){for(var i=0;i<e.length;i++){var a=e[i],n="application/vnd.google-apps.folder"===(a.shortcutDetails&&a.shortcutDetails.targetMimeType||a.mimeType),t=a.id;r[t]=a,!c||n||g||(g=!0,o.appendChild(l),o.appendChild(p));a=S(a,s);(c&&n&&u?_:m).appendChild(a)}d.appendChild(_),p.appendChild(m)}function f(e){var i;o.textContent="",g=!1,0!==e.length?(d.textContent="",p.textContent="",i=(i=e[0]).shortcutDetails&&i.shortcutDetails.targetMimeType||i.mimeType,u="application/vnd.google-apps.folder"===i,s.additionalFragment&&(o.appendChild(s.additionalFragment),c&&u||o.appendChild(l)),c&&u?(o.appendChild(a),o.appendChild(d)):(g=!0,o.appendChild(p)),o.appendChild(p),h(e)):(e=L(s),o.appendChild(e))}var v=!0,y=null;s.cachingId&&cjgApis.cache.getItem(s.gAccount,s.cachingId).then(function(e){var i;!1!==v&&e&&(i=JSON.parse(e),Array.isArray(i)&&(f(i),y=e,s.priority&&j(!1)))}),function a(){return y&&s.priority||j(!0),function i(a){if(a.priority)return N(a).then(function(e){return 0===(e=e.filter(function(e){return e.id})).length?i({q:"(not mimeType = 'application/vnd.google-apps.folder') and trashed = false",orderBy:"recency desc",gAccount:a.gAccount,pageToken:a.pageToken,pageSize:10}):{files:e}});var e=cjBasics.urlParams.attach(B+"files",{prettyPrint:"false",pageToken:a.pageToken,pageSize:a.pageSize,supportsAllDrives:"true",includeItemsFromAllDrives:"true",q:a.q,orderBy:a.orderBy,fields:"files("+w+"),nextPageToken"});return cjgApis.request(e,{fetchAs:"json"},{account:a.gAccount,requiredScopes:b}).then(function(e){return{nextPageToken:e.nextPageToken,files:e.files.map(function(e){return e.hasThumbnail="thumbnailLink"in e,delete e.thumbnailLink,e})}})}(t).then(function(e){if(e.nextPageToken&&(t.pageToken=e.nextPageToken,o.cjceSetInfiniteScroll(a)),v){v=!1;var i=JSON.stringify(e.files);if(i===y)return void j(!1);s.priority&&y||f(e.files),y=i,cjgApis.cache.setItem(s.gAccount,s.cachingId,i)}else h(e.files);j(!1)},function(){})}()})}();