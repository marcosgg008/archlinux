"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cjce.registerTemplate("bm-p-searchconsole",function(e,l){var s,n,t,a,i,c,r,o=["https://www.googleapis.com/auth/webmasters.readonly"],_="https://content.googleapis.com/webmasters/v3/",m="https://search.google.com",d="/"+l.wizPath+"search-console",b=m+d,j=cjBasics.lang.i18n("cj_i18n_00444","Search Console"),g=j,p=cjBasics.uniqueId.generate(),u={bm_cid:"searchconsole",bm_cst:"2",bm_wiz:"1",bm_iid:p,hl:cjBasics.lang.current},h="/webmasters/tools",w="https://www.google.com"+h,U="https://encrypted.google.com"+h,B="0"===l.account.authuser?null:l.account.authuser,f=B?"?authuser="+B:"",h=!cjBasics.wrif.supported,B=!0,y=cjBasics.lang.i18n("cj_i18n_06818","All properties"),x=[{id:"home",iconName:"__mdi:home",label:y,newTabUrl:""},{iconName:"__mdi:notifications",label:cjBasics.lang.i18n("cj_i18n_06742","All messages"),newTabUrl:"/message-list",legacyUrl:!0,external:B},{iconName:"__mdi:email",label:cjBasics.lang.i18n("cj_i18n_06752","Email preferences"),newTabUrl:"/user-settings/email-preferences",allProperties:!0,external:h},{iconName:"__mdi:search",label:cjBasics.lang.i18n("cj_i18n_06753","Search Console in Search Results"),newTabUrl:"/user-settings/performance-on-search",allProperties:!0,divider:!0,external:h}],T={id:"searchResults",iconName:"__mdi:google",label:cjBasics.lang.i18n("cj_i18n_05092","Search results"),newTabUrl:"/performance/search-analytics",external:h},B=[{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_06819","Performance")},T,{iconName:"__mdi:discover",label:cjBasics.lang.i18n("cj_i18n_00926","Discover"),newTabUrl:"/performance/discover",external:h},{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_06820","Index")},{iconName:"__mdi:file_copy",label:cjBasics.lang.i18n("cj_i18n_06756","Coverage"),newTabUrl:"/index",external:h},{iconName:"__mdi:account_tree",label:cjBasics.lang.i18n("cj_i18n_06757","Sitemaps"),newTabUrl:"/sitemaps",external:h},{iconName:"__mdi:visibility_off",label:cjBasics.lang.i18n("cj_i18n_06758","Removals"),newTabUrl:"/removals",external:h},{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_06821","Security & manual actions")},{iconName:"__mdi:assistant_photo",label:cjBasics.lang.i18n("cj_i18n_06759","Manual actions"),newTabUrl:"/manual-actions",external:h},{iconName:"__mdi:security",label:cjBasics.lang.i18n("cj_i18n_06760","Security issues"),newTabUrl:"/security-issues",external:h},{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_06964","Experience")},{iconName:"__mdi:cjg_experience",label:cjBasics.lang.i18n("cj_i18n_06798","Page experience"),newTabUrl:"/page-experience",external:h},{iconName:"__mdi:speed",label:cjBasics.lang.i18n("cj_i18n_06761","Core web vitals"),newTabUrl:"/core-web-vitals",external:h},{iconName:"__mdi:smartphone",label:cjBasics.lang.i18n("cj_i18n_06762","Mobile usability"),newTabUrl:"/mobile-usability",external:h},{iconName:"__mdi:smartphone",label:cjBasics.lang.i18n("cj_i18n_06763","Mobile usability summary"),newTabUrl:"/mobile-usability/summary",external:h},{iconName:"__mdi:offline_bolt",label:cjBasics.lang.i18n("cj_i18n_01767","AMP"),newTabUrl:"/amp",external:h},{iconName:"__mdi:offline_bolt",label:cjBasics.lang.i18n("cj_i18n_06764","Indexed AMP pages reason"),newTabUrl:"/amp/reason-drilldown",external:h},{iconName:"__mdi:offline_bolt",label:cjBasics.lang.i18n("cj_i18n_06765","Indexed AMP pages"),newTabUrl:"/amp/drilldown",external:h},{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_06823","Features")},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06766","Job Posting"),newTabUrl:"/jobs",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06767","Recipes"),newTabUrl:"/recipes",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_00484","Events"),newTabUrl:"/events",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06768","Breadcrumbs"),newTabUrl:"/breadcrumbs",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06769","Logos"),newTabUrl:"/logos",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06754","FAQ"),newTabUrl:"/faq",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_01823","Products"),newTabUrl:"/product",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06770","Unparsable structured data"),newTabUrl:"/unknown-type",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06771","Sitelinks searchbox"),newTabUrl:"/sitelinks-searchbox",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_02121","How to"),newTabUrl:"/how-to",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06772","Fact checks"),newTabUrl:"/fact-check",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06773","Guided recipes"),newTabUrl:"/guided-recipes",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06774","Review snippets"),newTabUrl:"/review-snippet",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_00014","Videos"),newTabUrl:"/videos",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06775","Datasets"),newTabUrl:"/datasets",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06776","Image licences"),newTabUrl:"/image-licenses",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06777","Q&A"),newTabUrl:"/q-and-a",external:h},{iconName:"__mdi:layers",label:cjBasics.lang.i18n("cj_i18n_06778","Special announcements"),newTabUrl:"/special-announcements",external:h},{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_06825","Legacy")},{iconName:"__mdi:public",label:cjBasics.lang.i18n("cj_i18n_06800","International targeting"),newTabUrl:"/i18n",legacyUrl:!0,external:B},{iconName:"__mdi:notifications",label:cjBasics.lang.i18n("cj_i18n_06802","Legacy messages"),newTabUrl:"/site-message-list",legacyUrl:!0,external:B},{iconName:"__mdi:publish",label:cjBasics.lang.i18n("cj_i18n_00774","Crawl URL"),newTabUrl:"/submit-url",legacyUrl:!0,external:B},{iconName:"__mdi:link",label:cjBasics.lang.i18n("cj_i18n_06743","URL parameters"),newTabUrl:"/crawl-url-parameters",legacyUrl:!0,external:B},{iconName:"__mdi:ad",label:cjBasics.lang.i18n("cj_i18n_06803","Ad experience report desktop"),newTabUrl:"/ad-experience-desktop",legacyUrl:!0,external:B},{iconName:"__mdi:ad",label:cjBasics.lang.i18n("cj_i18n_06804","Ad experience report mobile"),newTabUrl:"/ad-experience-mobile",legacyUrl:!0,external:B},{iconName:"__mdi:pan_tool",label:cjBasics.lang.i18n("cj_i18n_06805","Abusive experiences"),newTabUrl:"/abusive-experiences",legacyUrl:!0,external:B},{iconName:"__mdi:pan_tool",label:cjBasics.lang.i18n("cj_i18n_06806","Abusive notifications"),newTabUrl:"/abusive-notifications",legacyUrl:!0,external:B},{iconName:"__mdi:highlight_alt",label:cjBasics.lang.i18n("cj_i18n_06745","Data highlighter"),newTabUrl:"/data-highlighter",legacyUrl:!0,external:B},{iconName:"__mdi:http",label:cjBasics.lang.i18n("cj_i18n_06744","Robots.txt tester"),newTabUrl:"/robots-testing-tool",legacyUrl:!0,external:B},{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_00298","Settings")},{iconName:"__mdi:notifications",label:cjBasics.lang.i18n("cj_i18n_01128","Messages"),newTabUrl:"/?action=messages",external:!0},{iconName:"__mdi:account_tree",label:cjBasics.lang.i18n("cj_i18n_01167","Links"),newTabUrl:"/links",external:h},{iconName:"__mdi:settings",label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),newTabUrl:"/settings",external:h},{iconName:"__mdi:verified_user",label:cjBasics.lang.i18n("cj_i18n_06809","Ownership"),newTabUrl:"/ownership",external:h},{iconName:"__mdi:people",label:cjBasics.lang.i18n("cj_i18n_06672","Users and permissions"),newTabUrl:"/users",external:h},{iconName:"__mdi:swap_horiz",label:cjBasics.lang.i18n("cj_i18n_06808","Associates"),newTabUrl:"/settings/associations",external:h},{iconName:"__mdi:forward",label:cjBasics.lang.i18n("cj_i18n_06810","Change of address"),newTabUrl:"/settings/change-address",external:h},{iconName:"__mdi:timeline",label:cjBasics.lang.i18n("cj_i18n_06801","Crawl stats"),newTabUrl:"/settings/crawl-stats",external:h},{iconName:"__mdi:news",label:cjBasics.lang.i18n("cj_i18n_06811","European press publication status"),newTabUrl:"/settings/eucd",external:h},{iconName:"__mdi:slow_motion_video",label:cjBasics.lang.i18n("cj_i18n_06812","Limit crawl rate"),newTabUrl:"/settings",legacyUrl:!0,external:B},{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_06826","Property tools")},{iconName:"__mdi:child_care",label:cjBasics.lang.i18n("cj_i18n_06813","COPPA"),newTabUrl:"/coppa",external:!0},{iconName:"__mdi:coronavirus",label:cjBasics.lang.i18n("cj_i18n_06814","COVID-19 Special announcement"),newTabUrl:"/special-announcement",external:!0},{iconName:"__mdi:settings_applications",label:cjBasics.lang.i18n("cj_i18n_06815","Opt out from certain Google properties"),newTabUrl:"/opt-out",external:!0},{iconName:"__mdi:link",label:cjBasics.lang.i18n("cj_i18n_06740","Disavow links"),newTabUrl:"/disavow-links",external:!0}];function N(e){l.openTab(b+e)}function v(i){s=i[0];var c=cjce.createElement("cjmd-list");i.map(function(e){var a,n=e,i=e,c=e.startsWith("sc-domain:");return c?n="https://"+(i=a=e.replace("sc-domain:",""))+"/":a=new URL(n).hostname,g=i,{eTLDp1:function(e){for(var a=[".co.uk",".co.jp",".github.io",".blogspot.com"],n=0;n<a.length;n++)if(e.endsWith(a[n]))return e.match(/(?:[^.]+?)\.(?:[^.]+?)\.(?:[^.]+?)$/)[0];return e.match(/(?:[^.]+?)\.(?:[^.]+?)$/)[0]}(a),label:i,siteUrl:n,resourceId:e,domainProperty:c}}).sort(function(e,a){return e.eTLDp1!==a.eTLDp1?e.eTLDp1<a.eTLDp1?-1:1:e.domainProperty!==a.domainProperty?e.domainProperty?-1:1:e.siteUrl<a.siteUrl?-1:1}).forEach(function(e,a,n){3<i.length&&(0!==a&&n[a-1].eTLDp1===e.eTLDp1||(a=cjce.createElement("cjmd-subheader",{color:!0,label:e.eTLDp1}),c.appendChild(a)));e=function(a){var e=cjce.createElement("cjmd-item",{onClick:function(){s=a.resourceId,g=a.label,P(r.cjceSelectedId="searchResults",T)},onMetaClick:function(){var e=cjBasics.urlParams.attach(b,{resource_id:a.resourceId});l.openTab(e)}}),n=cjce.createElement("cjmd-icon",{favicon:a.siteUrl});e.appendChild(n);var i=document.createElement("div");return i.className="cjmd-item__body",e.appendChild(i),(n=document.createElement("div")).className="cjmd-item__header",n.textContent=a.label,i.appendChild(n),a.domainProperty&&((n=document.createElement("div")).className="cjmd-secondarytext",n.textContent=cjBasics.lang.i18n("cj_i18n_06816","Domain property"),i.appendChild(n)),e}(e);c.appendChild(e)}),t.textContent="",t.appendChild(c)}function C(e){0<e.length?v(e):(e=cjce.createElement("cjmd-emptystate",{label:cjBasics.lang.i18n("cj_i18n_00055","No sites found"),iconName:"__mdi:drive_site"}),t.textContent="",t.appendChild(e))}function S(){var e=cjBasics.urlParams.attach(_+"sites",{fields:"siteEntry/siteUrl",prettyPrint:"false"});return cjgApis.request(e,{fetchAs:"json"},{account:l.account,requiredScopes:o}).then(function(e){e=(e=e)&&"object"===_typeof(e)?(e=e.siteEntry,Array.isArray(e)?e.map(function(e){return e.siteUrl}).sort():[]):[];return cjgApis.cache.setItem(l.account,"bm_cache_v31__searchconsole__sites",e),e})}function L(){var a,n=!1;cjgApis.cache.getItem(l.account,"bm_cache_v31__searchconsole__sites").then(function(e){n||Array.isArray(e)&&(a=e.join("@"),C(e))}),S().then(function(e){n=!0,e.join("@")!==a&&C(e)},function(e){var a;n=!0,a=e,e=cjce.createElement("bm-fulldialog",{inline:!0,lockup:{label:j},iconName:"search_console",message:cjBasics.lang.i18n("cj_i18n_00284","Before you can use this page, you need to give access to Google Search Console"),actionLabel:cjBasics.lang.i18n("cj_i18n_01916","Continue with Google"),actionG:!0,action:function(){cjgApis.auth.requestPermissions(l.account,a.cjg_missing_scopes)}}),t.appendChild(e)}).then(function(){i.cjceSetLoading(!1)})}function P(e,a){i.cjceSetBackState(!0),i.cjceSetPageLabel(a.label),i.cjceSetServiceLabel(g),n.hidden=!0;a=d+a.newTabUrl,a=cjBasics.urlParams.attach(a,u);s&&(a+="&resource_id="+encodeURIComponent(s)),n.cjceSendFrameCommand({method:"bmCstUpdateState",value:a},m),c.hidden=!0,t.hidden=!0,n.hidden=!1}function A(){n.hidden=!0,c.hidden=!1,t.hidden=!1,i.cjceSetBackState(!1),i.cjceSetPageLabel(y),i.cjceSetServiceLabel(j),r.cjceSelectedId="home"}x=x.concat(B),i=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"search_console",serviceLabel:j,pageLabel:y,bmApis:l,onBack:A,onNewTab:function(){n.hidden?N(""):n.cjceGetCleanUrl(m).then(function(e){e=e||b;l.openTab(e)})}}),e.appendChild(i),a=i.cjceDrawerEl,r=cjce.createElement("bm-navlist",{selectedId:"home",isSelector:!0,items:x,compact:!0,onChange:function(e,a){"home"===e?A():P(0,a)},onNewTab:function(e,a){a=a.legacyUrl?w+a.newTabUrl+f:b+a.newTabUrl;l.openTab(a)}}),a.appendChild(r),t=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),L(),e.appendChild(t),c=cjce.createElement("gmd-fab",{label:cjBasics.lang.i18n("cj_i18n_06817","Add a property"),onClick:function(){N("/welcome")},onMetaClick:function(){N("/welcome")}}),e.appendChild(c),cjBasics.webRequest.handleIframeHeaders([b+"*bm_iid="+p+"*",b+"*bm_iid%3D"+p+"*",w+"*bm_iid="+p+"*",U+"*bm_iid="+p+"*"],{handleFirefoxInject:!0,disableOgs:m}),(n=cjce.createElement("bm-iframe",{src:cjBasics.urlParams.attach(b,u),solid:"#fff",shadow:!0,onLoad:function(){i.cjceSetLoading(!1)}})).hidden=!0,e.appendChild(n)});