"use strict";cjce.registerTemplate("bm-p-chatwithwebapp",function(c,a){c.style.setProperty("--accent-color","#34a853");var e="https://mail.google.com",n="https://chat.google.com",i=n,t="/u/"+a.account.authuser+"/",s=i+t,o=cjBasics.uniqueId.generate(),l={bm_iid:o,bm_cid:"chatwithwebapp",bm_cst:"2",bm_wiz:"1",origin:cjBasics.wrif.supported?null:e,shell:"1",hl:cjBasics.lang.current},r=!1;var m=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"chat",serviceLabel:cjBasics.lang.i18n("cj_i18n_00819","Chat"),pageLabel:cjBasics.lang.i18n("cj_i18n_00291","Home"),bmApis:a,onBack:function(){u.cjceSendFrameCommand({method:"bmCstClickDomElement",value:'[aria-label="Back"]'},i)},onNewTab:function(){u.cjceGetCleanUrl(i).then(function(e){a.openTab(e||s)})}});c.appendChild(m);var d=cjce.createElement("cjmd-iconbutton",{iconName:"__mdi:video_call",label:cjBasics.lang.i18n("cj_i18n_06916","New meeting"),onClick:function(){var e=cjgShortcuts.getUrl("1188",a.account);a.openTab(e)}});m.cjceAppendChild(d);var _=m.cjceDrawerEl,d={home:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_00291","Home"),shortcutId:"559"},settings:{iconName:"__mdi:settings",label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),divider:!0,external:!0,newTabUrl:s+"settings"},relatedHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},meet:{iconName:"__mdi:meet",label:cjBasics.lang.i18n("cj_i18n_00809","Meet"),shortcutId:"545",external:!a.servicesDatabase.meet,additionalFragment:cjce.createElement("cjmd-iconbutton",{iconName:"__mdi:video_call",label:cjBasics.lang.i18n("cj_i18n_06916","New meeting"),onClick:function(){var e=cjgShortcuts.getUrl("1188",a.account);a.openTab(e)}})},tasks:{iconName:"__mdi:tasks",label:cjBasics.lang.i18n("cj_i18n_00439","Tasks"),shortcutId:"140"},drive:{label:cjBasics.lang.i18n("cj_i18n_00390","Drive"),iconName:"__mdi:drive",shortcutId:"48"},hangouts:{iconName:"__mdi:hangout",label:cjBasics.lang.i18n("cj_i18n_01337","Classic Hangouts"),shortcutId:"218"}};function g(e){u.src=cjBasics.urlParams.attach(i+t+e,l)}d=cjce.createElement("bm-navlist",{selectedId:"home",items:d,onClick:function(e){"home"===e?g(""):"settings"===e?g("settings"):a.pageManager.navigate(e)},onNewTab:function(e,c){c=c.newTabUrl||cjgShortcuts.getUrl(c.shortcutId,a.account);a.openTab(c)}});_.appendChild(d);d=cjBasics.urlParams.attach(s,l);cjBasics.webRequest.handleIframeHeaders([e+"/*bm_iid="+o+"*",n+"/*bm_iid="+o+"*"],{handleFirefoxInject:!0,handleSwCache:!0,disableOgs:i}),cjBasics.webRequest.catchAndStop([n+"/u/*/error/noaccess*",n+"/error/noaccess*"],function(){var e;r||(r=!0,e=cjBasics.lang.i18n("cj_i18n_06694","Google Chat"),c.textContent="",e=cjce.createElement("bm-fulldialog",{bmApis:a,onNewTab:function(){a.openTab(s)},lockup:{label:e},iconName:"chat",message:cjBasics.lang.i18n("cj_i18n_01336","This account doesn't have access to __product_name__").replace("__product_name__",e),actionLabel:cjBasics.lang.i18n("cj_i18n_01543","Switch account"),action:function(){a.pageManager.navigate("accountchooser")}}),c.appendChild(e))},!0);var u=cjce.createElement("bm-iframe",{solid:"#fff",src:d,onLoad:function(){m.cjceSetLoading(!1)},onMessage:function(e){var c=e.bm_method,e=e.bm_value;"chatwithwebappHideNav"===c&&(m.hidden=e)}});c.appendChild(u)});