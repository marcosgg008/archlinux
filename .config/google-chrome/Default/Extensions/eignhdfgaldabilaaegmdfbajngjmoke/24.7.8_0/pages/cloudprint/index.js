"use strict";cjce.registerTemplate("bm-p-cloudprint",function(e,i){var c,n,a,t,d="jobs",l="",r="https://www.google.com/cloudprint",o=i.account.authuser,s=r;"0"!==o&&(s+="?authuser="+o);var m={jobs:{label:cjBasics.lang.i18n("cj_i18n_00052","Print Jobs"),iconName:"__mdi:insert_drive_file",newTabUrl:s+"#jobs"},printers:{label:cjBasics.lang.i18n("cj_i18n_00053","Printers"),iconName:"__mdi:print",newTabUrl:s+"#printers",divider:!0},addCloud:{label:cjBasics.lang.i18n("cj_i18n_01287","Add a Cloud-Ready Printer"),iconName:"__mdi:add_circle_outline",newTabUrl:"https://www.google.com/cloudprint/learn/printers/",external:!0},addClassic:{label:cjBasics.lang.i18n("cj_i18n_01288","Add a Classic Printer"),iconName:"__mdi:add_circle_outline",newTabUrl:"https://support.google.com/cloudprint?p=mgmt_classic"+("0"!==o?"&authuser="+o:""),external:!0}},p={"application/pdf":{name:"__mdi:drive_pdf",color:"#ea4335"},"text/plain":{name:"__mdi:drive_text",color:"#1a73e8"}};function j(e,n){(n=n||{}).authuser=o;n=cjBasics.urlParams.attach(r+"/"+e,n);return cjBasics.ajax(n,{fetchAs:"json",headers:{"X-CloudPrint-Proxy":"Google-JS"}})}function u(n){var e=cjce.createElement("cjmd-item");e.addEventListener("click",function(){var e;e=n.id,i.openTab(s+"#jobs/"+e)});var c=(a=n.contentType,p[a]||{name:"__mdi:drive_file",color:"#1a73e8"});c.withShell=!0;var t=cjce.createElement("cjmd-icon",c);e.appendChild(t);var a=document.createElement("div");a.className="cjmd-item__body";c=document.createElement("div");c.className="cjmd-item__header",c.textContent=n.title,a.appendChild(c);t=document.createElement("div");t.className="cjmd-secondarytext";c=cjBasics.datetime.printDateString(parseInt(n.createTime,10)),c=document.createTextNode(cjBasics.lang.i18n("cj_i18n_00011","created")+": "+c+" - "+cjBasics.lang.i18n("cj_i18n_00012","status")+": "+n.status);return t.appendChild(c),a.appendChild(t),e.appendChild(a),e}function _(){var t=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"});c.appendChild(t),j("search").then(function(e){var n,c=e.printers;0===c.length?(e=cjce.createElement("cjmd-emptystate",{label:cjBasics.lang.i18n("cj_i18n_00372","No printers found"),iconName:"__mdi:print"}),t.appendChild(e)):(n=cjce.createElement("cjmd-list"),c.forEach(function(e){e=function(e){var n=cjce.createElement("cjmd-item");n.addEventListener("click",function(){i.openTab(s+"#printers/"+e.id)});var c=cjce.createElement("cjmd-icon",{serviceName:{ANDROID_CHROME_SNAPSHOT:"chrome",DRIVE:"drive"}[e.type]||"cloudprint"});n.appendChild(c);var t=document.createElement("div");t.className="cjmd-item__body";var a=document.createElement("div");return a.className="cjmd-item__header",a.textContent=e.displayName,t.appendChild(a),c=[],e.ownerId===i.account.displayEmail&&c.push(cjBasics.lang.i18n("cj_i18n_00013","owned by me")),"UNKNOWN"!==e.connectionStatus&&c.push(e.connectionStatus),0===c.length&&((a=document.createElement("div")).className="cjmd-secondarytext",c=c.join(" - "),c=document.createTextNode(c),a.appendChild(c),t.appendChild(a)),n.appendChild(t),n}(e);n.appendChild(e)}),t.appendChild(n)),a.cjceSetLoading(!1)})}function h(e,n){var t;c.textContent="","printers"===e?_():(n=n,t=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),c.appendChild(t),j("jobs",{q:n}).then(function(e){t.textContent="";var n,c=e.jobs;0===c.length?(e=cjce.createElement("cjmd-emptystate",{label:cjBasics.lang.i18n("cj_i18n_00374","No print jobs found"),iconName:"__mdi:insert_drive_file"}),t.appendChild(e)):(n=cjce.createElement("cjmd-list"),c.forEach(function(e){e=u(e);n.appendChild(e)}),t.appendChild(n)),a.cjceSetLoading(!1)}))}function b(e,n){d===e&&l===n||(a.cjceSetLoading(!0),d=e,t.cjceSelectedId=e,a.cjceSetPageLabel(m[e].label),h(e,n))}function C(e){b("jobs",e)}function v(e){e=s+"#jobs?q="+encodeURIComponent(e);i.openTab(e)}a=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"cloudprint",serviceLabel:cjBasics.lang.i18n("cj_i18n_00332","Cloud Print"),pageLabel:cjBasics.lang.i18n("cj_i18n_00052","Print Jobs"),searchbox:{onClear:C,onSubmit:C,onMetaSubmit:v},bmApis:i,onNewTab:function(){var e=s+"#"+d;"jobs"===d&&l&&(e+="?q="+encodeURIComponent(l)),i.openTab(e)}}),e.appendChild(a),n=a.cjceSearchboxEl,i.setOnPageDisplayHandler(n.select),t=cjce.createElement("bm-navlist",{isSelector:!0,selectedId:d,items:m,onChange:b,onNewTab:function(e,n){i.openTab(n.newTabUrl)}}),a.cjceDrawerEl.appendChild(t),c=cjce.createElement("cjmd-container"),e.appendChild(c),h(d)});