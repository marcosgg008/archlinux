"use strict";cjce.registerTemplate("bm-p-mapswithcompanion",function(a,n){var c,t,e,i="https://www.google.com",o=i,s=cjBasics.navigator.opera,r=(o=s?"https://maps.google.com":o)+"/maps/companion",l="0"===n.account.authuser?null:n.account.authuser,s=cjgApis.companion.getInitData(),m=s.id,u=s.hash,h=s.parameters,p=cjBasics.uniqueId.generate(),d="",_=cjBasics.lang.i18n("cj_i18n_00061","Explore");var g,b,j,f,w=["q","Wc"],v=(b="bm_cache_v31__mapswithcompanion__functionnames",{set:function(a){B().then(function(){I(a),browserStorage.local.setItem(b,a),cjgApis.cache.setItem(n.account,b,a)})},restore:B});function I(a){Array.isArray(a)&&a.forEach(function(a,e){var n;"string"==typeof(n=a)&&/^[a-zA-Z$]{1,3}$/.test(n)&&(w[e]=a)})}function B(){return g=g||cjgApis.cache.getItem(n.account,b).then(function(a){return Array.isArray(a)?void I(a):browserStorage.local.getItem(b).then(I)})}function S(a){c&&c.cjceSendFrameCommand(a,o)}function N(a,e){S({method:"mapswithcompanionUpdateSearchQuery",value:a}),e&&setTimeout(function(){S({method:"mapswithcompanionSubmitSearchQuery",value:a})})}function y(a){a=cjBasics.urlParams.attach(i+"/maps/search/",{api:"1",query:a,authuser:"0"!==n.account.authuser?n.account.authuser:null});n.openTab(a)}function x(){var e;c=cjce.createElement("bm-iframe",{src:(e={bm_cid:"mapswithcompanion",bm_iid:p,bm_wiz:"1",bm_wfn:w.join("_"),hl:cjBasics.lang.current,authuser:"0"===n.account.authuser?null:n.account.authuser},Object.keys(h).forEach(function(a){e[a]=h[a]}),e.usegapi=null,cjBasics.urlParams.attach(r,e)+u),solid:"#fff",sandbox:"allow-scripts allow-forms allow-same-origin allow-popups",onLoad:function(){t.cjceSetLoading(!1)},onMessage:function(a){var e;"string"==typeof a&&a.startsWith("!_{")?(e=cjgApis.companion.handleOpenUrlMessage(a,m,n.account))&&n.openTab(e):"mapswithcompanionBackState"===a.bm_method?t.cjceSetBackState(Boolean(a.bm_value)):"mapswithcompanionNewFunctionNames"===a.bm_method?v.set(a.bm_value):"mapswithcompanionUpdatePageTitle"===a.bm_method&&t.cjceSetPageLabel(a.bm_value||_)}}),a.appendChild(c)}function C(){c.cjceSendFrameRequest({method:"mapswithcompanionOpenInNew",value:'img[src*="x/arrow_back_"]'},o).then(function(a){if(!a)return d?y(d):void(a||(a=cjBasics.urlParams.attach(i+"/maps",{authuser:l}),n.openTab(a)))})}function T(a){S({method:"mapswithcompanionToggleFocusState",value:a})}t=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"maps",pageLabel:_,serviceLabel:cjBasics.lang.i18n("cj_i18n_00423","Maps"),searchbox:{onInput:function(a){N(a,!1)},onSubmit:function(a){N(d=a,!0),e.value="",T(!1),t.cjceNavigatorEl.cjceSetCollapseState(!1)},onMetaSubmit:y,onClear:function(){N(d="",!0)},onFocusChanged:T},bmApis:n,onNewTab:C,onBack:function(){S({method:"mapswithcompanionGoBack"}),e.value="",T(!1),t.cjceSetNavigatorCollapseState(!1)}}),a.appendChild(t),e=t.cjceSearchboxEl,n.setOnPageDisplayHandler(function(){e.select(),T(!0)}),j=t.cjceDrawerEl,f={home:{iconName:"__mdi:place",label:_,shortcutId:"101"},covid19info:{label:cjBasics.lang.i18n("cj_i18n_06925","COVID-19 Info"),shortcutId:"1194",iconName:"__mdi:warning",external:!0},locationsharing:{label:cjBasics.lang.i18n("cj_i18n_00863","Location sharing"),shortcutId:"590",iconName:"__mdi:record_voice_over",external:!0},places:{label:cjBasics.lang.i18n("cj_i18n_00127","Your places"),shortcutId:"557",iconName:"__mdi:place",external:!0},contributions:{label:cjBasics.lang.i18n("cj_i18n_00128","Your contributions"),shortcutId:"332",iconName:"__mdi:rate_review",external:!0},timeline:{label:cjBasics.lang.i18n("cj_i18n_00129","Your timeline"),shortcutId:"185",iconName:"__mdi:timeline",external:!0},yourdata:{label:cjBasics.lang.i18n("cj_i18n_01780","Your data in Maps"),shortcutId:"912",iconName:"__mdi:cjg_account",external:!0,divider:!0},mymaps:{label:cjBasics.lang.i18n("cj_i18n_00410","My Maps"),shortcutId:"167",iconName:"__mdi:file_map"},earth:{label:cjBasics.lang.i18n("cj_i18n_00471","Earth"),shortcutId:"49",iconName:"__mdi:earth",external:!n.servicesDatabase.earth}},f=cjce.createElement("bm-navlist",{items:f,selectedId:"home",onClick:function(a,e){"home"!==a&&n.pageManager.navigate(a)},onNewTab:function(a,e){e=e.newTabUrl||cjgShortcuts.getUrl(e.shortcutId,n.account);n.openTab(e)}}),j.appendChild(f),cjBasics.webRequest.handleIframeHeaders([r+"*bm_iid="+p+"*"],{handleSwCache:!0,handleFirefoxInject:!0}),v.restore().then(x)});