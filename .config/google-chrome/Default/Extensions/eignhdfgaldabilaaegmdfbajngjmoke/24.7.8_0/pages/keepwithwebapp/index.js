"use strict";cjce.registerTemplate("bm-p-keepwithwebapp",function(e,n){var i,t,l,o,c,s="https://keep.google.com",a="/"+n.wizPath,r=s+a,m=cjBasics.lang.i18n("cj_i18n_01169","Notes"),d=cjBasics.uniqueId.generate(),b={bm_cid:"keepwithwebapp",bm_udm:n.darkMode?"1":null,bm_cst:"1",bm_iid:d,forcehl:"1",hl:cjBasics.lang.current},_="home",h=[],p=!1,j=["home","reminders"],u=["editlabels","archive","trash"],f={home:{label:cjBasics.lang.i18n("cj_i18n_01169","Notes"),iconName:"__mdi:lightbulb_outline",newTabUrl:!0},reminders:{label:cjBasics.lang.i18n("cj_i18n_00081","Reminders"),iconName:"__mdi:notifications",newTabUrl:!0},editlabels:{label:cjBasics.lang.i18n("cj_i18n_06576","Edit labels"),iconName:"__mdi:edit"},archive:{label:cjBasics.lang.i18n("cj_i18n_00821","Archive"),iconName:"__mdi:archive",newTabUrl:!0},trash:{label:cjBasics.lang.i18n("cj_i18n_00005","Bin"),iconName:"__mdi:delete",newTabUrl:!0}};function g(){var e=l,a=[];h.forEach(function(e){var c="label/"+encodeURIComponent(e);f[c]||(f[c]={label:e,iconName:"__mdi:label",newTabUrl:!0}),a.push(c)});var c=j.concat(a,u),n={};c.forEach(function(e){n[e]=f[e]}),l=cjce.createElement("bm-navlist",{isSelector:!0,selectedId:_,items:n,onChange:function(e){"editlabels"===e?(l.cjceSelectedId=_,o.cjceSendFrameCommand({method:"keepwithwebappEditLabels"},s)):C(e)},onNewTab:w}),t.appendChild(l);c=t.contains(document.activeElement);cjce.replaceChild(t,l,e),c&&t.cjceToggleState(!0)}function w(e){e&&"home"!==e?n.openTab(r+"#"+e):n.openTab(r)}function C(e){o.cjceSendFrameCommand({method:"keepwithwebappSetHash",value:e},s)}function v(e){var c="";C(c=e?"#search/text="+encodeURIComponent(e):c)}function k(e,c){(c?w:C)(e)}c=cjce.createElement("cjmd-fabgroup",{items:[cjce.createElement("gmd-fab",{label:cjBasics.lang.i18n("cj_i18n_06306","New note"),onClick:function(){k("newnote")},onMetaClick:function(){k("newnote",!0)}}),cjce.createElement("cjmd-fab",{mini:!0,iconName:"__mdi:check_box",label:cjBasics.lang.i18n("cj_i18n_06307","New list"),onClick:function(){k("newlist")},onMetaClick:function(){k("newlist",!0)}}),cjce.createElement("cjmd-fab",{mini:!0,iconName:"__mdi:add_alert",label:cjBasics.lang.i18n("cj_i18n_06308","New reminder"),onClick:function(){k("newreminder")},onMetaClick:function(){k("newreminder",!0)}})]}),e.appendChild(c),i=cjce.createElement("bm-ogb",{loading:!0,drawer:{color:"#f5a900"},serviceIcon:"keep",serviceLabel:cjBasics.lang.i18n("cj_i18n_00422","Keep"),pageLabel:m,searchbox:{color:"#fbbc05",onSubmit:function(e){v(e)},onClear:function(){v("")}},bmApis:n,onNewTab:function(){w(_)}}),e.appendChild(i),t=i.cjceDrawerEl,c=cjBasics.urlParams.attach(r,b),cjBasics.webRequest.handleIframeHeaders([s+"/*bm_iid="+d+"*"],{disableOgs:s,handleSwCache:!0}),g(),cjgApis.cache.getItem(n.account,"bm_cache_v31__keep__customlabels").then(function(e){!p&&Array.isArray(e)&&0<e.length&&(h=e,g())}),o=cjce.createElement("bm-iframe",{src:c,shadow:!0,onMessage:function(e){var c=e.bm_method,a=e.bm_value;"keepwithwebappUpdateView"===c&&(((l.cjceSelectedId=a).startsWith("label/")||f[a])&&(e=(e=f[a])?e.label:decodeURIComponent(a.replace("label/","")),i.cjceSetPageLabel(e)),_=a),"keepwithwebappLabels"===c&&(p=!0,a=Array.isArray(a)?a:[],JSON.stringify(h)!==JSON.stringify(a)&&(h=a,g(),cjgApis.cache.setItem(n.account,"bm_cache_v31__keep__customlabels",h)))},onLoad:function(){i.cjceSetLoading(!1),n.setOnPageDisplayHandler(function(e){var c=e.noteData;c&&((e=c.noteId)?C("#NOTE/"+e):(c="?reminder="+c.reminderId,c=cjBasics.urlParams.attach(a+c,b),o.cjceSendFrameCommand({method:"bmCstUpdateState",value:c},s))),i.cjceSearchboxEl.select()})}}),e.appendChild(o)});